---
title: "コメント"
free: true
---

## 1. コメントの基本
- コメントを使うと、プログラムの動作に影響を与えずに、コードにメモを残すことができる
	- コメント内は日本語を書くこともできる
- 使用しているコードエディタや統合開発環境（IDE）によっては、コメントをそれ以外の部分と色分けして、区別しやすく表示する機能がある

### 1.1 単一行コメント
- `//` 以降、行末までがコメントになる
- 次のコードには、2 つのコメント「かけ算が先に計算される」「14」がある

```cpp
#include <iostream>

int main()
{
	// かけ算が先に計算される
	std::cout << (10 + 2 * 2) << '\n'; // 14
}
```

- ある行のコードの実行を一時的に無効化する目的でコメントを使うこともある
	- これを「コメントアウト」という
- 次のコードでは、main 関数内の 2 行目がコメントアウトされている

```cpp
#include <iostream>

int main()
{
	std::cout << "Hello, C++!\n";
	//std::cout << "Hello, world!\n";
}
```

### 1.2 範囲コメント / C スタイルコメント
- `/*` と `*/` で囲んだ範囲がコメントになる
- C 言語で使われていたコメントの書き方であるため「C スタイルコメント」とも呼ばれる
- 次のコードには、3 つの範囲コメントがある

```cpp
#include <iostream>

int main()
{
	/* この範囲はコメントになる */
	std::cout << "Hello, C++!\n";

	/*
	この範囲もコメントになる
	std::cout << "Hello, world!\n";
	*/

	std::cout << /*123*/ 456 << '\n';
}
```

- 競技プログラミングでは、書きやすさから単一行コメントを使うことが多く、範囲コメントはあまり使われない

### 1.3 単一行コメントの注意点
- 単一行コメントの行末がバックスラッシュ「`\`」で終わる場合、次の行もコメントとして扱われるため注意が必要
	- 「ソースコードの行末に `\` があるとその改行を無視する」という C++ の仕様の影響で、改行が無いことにされるのが原因
	- あくまで C++ の仕様の副作用であるため、コメント内で意図的に使用することは推奨されない

```cpp
#include <iostream>

int main()
{
	// このコメントは次の行も含めてコメントになる\
	std::cout << "Hello, C++!\n";
	std::cout << "Hello, world!\n";
}
```

- 上記のコードは行末の `\` によって、コンパイラからは次のように解釈される

```cpp
#include <iostream>

int main()
{
	// このコメントは次の行も含めてコメントになるstd::cout << "Hello, C++!\n";
	std::cout << "Hello, world!\n";
}
```


## 2. 範囲コメントのネスト

### 2.1 範囲コメントの中に範囲コメントは NG
- 範囲コメントの中に範囲コメントがあるような、ネスト（入れ子）した範囲コメントは作れない
- 次のコードはコンパイルエラーになる
	- 5 行目の「`/*`」で範囲コメントが始まる（OK）
	- 6 行目先頭の「`/*`」はコメント内のテキストとして扱われる（意図とは違うかもしれないが文法的には OK）
	- 6 行目末尾の「`*/`」がコメントの終わりとして解釈され、最初の範囲コメントを終了させる（意図とは違うかもしれないが文法的には OK）
	- 範囲コメントが始まっていないのに、8 行目に「`*/`」が登場する（文法的に NG）

```cpp
#include <iostream>

int main()
{
	/*
	/* この範囲はコメントになる */
	std::cout << "Hello, C++!\n";
	*/
}
```

### 2.2 範囲コメントの中に単一行コメントは OK
- 範囲コメントの中に単一行コメントがある場合、単一行コメントは範囲コメントの一部として扱われるため、問題は生じない
- 次のコードは、`/*` から `*/` までが範囲コメントになる

```cpp
#include <iostream>

int main()
{
	/*
	//
	// この範囲はコメントになる
	//
	std::cout << "Hello, C++!\n";
	*/
}
```


## 3. コメントのベストプラクティス

### 3.1 コメントは適度に
- 競技プログラミングでは制限時間が厳しいことも多く、コードを最短・最速で書き切ることが重要になるシーンが多い
- コードの可読性とコーディング速度のバランスをとる必要がある
- 必要以上に長いコメントは書かないほうがよい場合が多く、自分にとって必要だと思う説明にとどめるのがポイント

### 3.2 長いコメントは複数行に分ける
- 1 行のコメントが長くなりすぎる場合は、複数行に分けて記述することもできる

```cpp
#include <iostream>

int main()
{
	// このプログラムは、
	// 3 つの整数 a, b, c を受け取り、
	// それらの和と積を計算して出力する
	int a, b, c;
	std::cin >> a >> b >> c;

	std::cout << (a + b + c) << '\n';
	std::cout << (a * b * c) << '\n';
}
```

### 3.3 アルゴリズムの意図を短いコメントで補足
- 競技プログラミングでは複雑なロジックを組む場面も少なくない。「何をしているのか」をコメントで簡潔に示しておくと、あとでコードを見返すときやデバッグのときに役立つ
- 新しいアルゴリズムを初めて学ぶときは、操作をコメントで補足することで理解が進むことがある

```cpp
	// 辺をコストの小さい順にソートする
	std::sort(edges.begin(), edges.end());

	// Union-Find 木
	UnionFind uf(V);

	// 最小全域木のコスト合計
	long long sum = 0;

	// コストが小さい順に並んだ各辺について
	for (const auto& edge : edges)
	{
		// 辺の両端点 u, v が既に同じ連結成分に属していないか
		// （＝まだつながっていないか）をチェックする
		if (!uf.connected(edge.u, edge.v))
		{
			// つながっていなければ連結成分をマージする
			uf.merge(edge.u, edge.v);

			// この辺のコストを加算する
			sum += edge.cost;
		}
	}
```

- 学習が進むことで、同じコードでも、次のようにコメントを省略しても理解できるようになるかもしれない

```cpp
	// クラスカル法で最小全域木のコストを求める
	std::sort(edges.begin(), edges.end());
	UnionFind uf(V);
	long long sum = 0;

	for (const auto& edge : edges)
	{
		if (!uf.connected(edge.u, edge.v))
		{
			uf.merge(edge.u, edge.v);
			sum += edge.cost;
		}
	}
```


### 3.4 コードエディタのコメント機能を使う
- コードエディタには、選択した範囲をコメントアウトする機能があることが多い
- うまく使いこなすことで、コメントを素早く適用・解除できる
- VSCode では、複数行を選択した状態で `Ctrl + /`（macOS では `Cmd + /`）を押すと、選択範囲のすべての行に `//` が追加（または削除）される


## 4. コメントと実行時性能
- C++ のコンパイラはコメントを無視するため、プログラムの実行速度やメモリ消費量に直接影響することはない


## 5. コメントの裏技
- 次のような形でコメントを記述すると、先頭を「`//*`」にするか「`/*`」にするかで、コメントアウトの対象が前半と後半で切り替わる
- 一方のコードと他方のコードを交互に切り替えて検証する際に、1 文字だけ変更すればよいので便利
- C++ 文法上は問題ないものの、あまり知られていないテクニックであり、読む人によっては混乱を招くため、一般には推奨されない

```cpp
#include <iostream>

int main()
{
	//*

	int a = 111;
	std::cout << a;
	
	/*/
	
	int b = 222;
	std::cout << b;
	
	//*/
}
```


## 6. コードの一部範囲を無効化する別の方法
- コメントではないが、コードの一部を無効化する別の方法として、プリプロセッサ `#if 0` と `#endif` を使う方法がある
- `#if 0` と `#endif` で囲まれた範囲は、コンパイル時に無視される
- `#if 0` を `#if 1` に変更することで、無効化したコードを有効化できる

```cpp
#include <iostream>

int main()
{
	std::cout << "Hello, C++!\n";

#if 0

	std::cout << "Hello, world!\n";

#endif

	std::cout << "Goodbye, C++!\n";
}
```


## 7. ドキュメントコメントを知る
- ドキュメントコメントとは、関数やクラスの説明のために、特別な形式で丁寧に書かれたコメントのこと
	- C++ の標準というわけではなく、ドキュメンテーションツールの慣習で使われる特殊なコメント
- プログラミングコンテストの最中にドキュメントコメントを書くことは少ないが、他人に使ってもらう自作ライブラリなどでは重要になる
- 専用のツールを使うことで、ドキュメントコメントから自動的に HTML 形式の API ドキュメントを生成できるなどのメリットがある
- ドキュメントコメントには、いくつかの代表的な形式があり、例えば Doxygen スタイルでは、関数のドキュメントコメントを次のように記述する
	- `///` で始まる行に説明を書く
	- `@brief` で簡潔な説明を書く
	- `@param` で引数の説明を書く
	- `@return` で戻り値の説明を書く
	- 詳しい書き方は Web 上の資料を参照すること
```cpp
/// @brief 長方形の面積を計算します。
/// @param width 長方形の幅
/// @param height 長方形の高さ
/// @return 長方形の面積
int RectangleArea(int width, int height)
{
	return (width * height);
}
```
