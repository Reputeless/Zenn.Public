---
title: "コメント"
free: true
---

## 1. コメントの基本
- コメントを使うと、プログラムの動作に影響を与えずに、コードにメモを残すことができる
	- コメント内は日本語を書くこともできる
- 使用しているテキストエディタや統合開発環境（IDE）によっては、コメントをそれ以外の部分と色分けして、区別しやすく表示する機能がある

### 1.1 単一行コメント
- `//` 以降、行末までがコメントになる
- 次のコードには、2 つのコメント「かけ算が先に計算される」「14」がある

```cpp
#include <iostream>

int main()
{
	// かけ算が先に計算される
	std::cout << (10 + 2 * 2) << '\n'; // 14
}
```

- ある行のコードの実行を一時的に無効化する目的でコメントを使うこともある
	- これを「コメントアウト」という
- 次のコードでは、main 関数内の 2 行目がコメントアウトされている

```cpp
#include <iostream>

int main()
{
	std::cout << "Hello, C++!\n";
	//std::cout << "Hello, world!\n";
}
```

### 1.2 範囲コメント / C スタイルコメント
- `/*` と `*/` で囲んだ範囲がコメントになる
- C 言語で使われていたコメントの書き方であるため「C スタイルコメント」とも呼ばれる
- 次のコードには、3 つの範囲コメントがある

```cpp
#include <iostream>

int main()
{
	/* この範囲はコメントになる */
	std::cout << "Hello, C++!\n";

	/*
	この範囲もコメントになる
	std::cout << "Hello, world!\n";
	*/

	std::cout << /*123*/ 456 << '\n';
}
```

### 1.3 単一行コメントの特殊な仕様
- 単一行コメントの行末がバックスラッシュ「`\`」で終わる場合、次の行もコメントとして扱われるという特殊な仕様があるため、注意が必要

```cpp
#include <iostream>

int main()
{
	// このコメントは次の行も含めてコメントになる\
	std::cout << "Hello, C++!\n";
	std::cout << "Hello, world!\n";
}
```


## 2. 範囲コメントのネスト
- 範囲コメントの中に範囲コメントがあるような、ネスト（入れ子）した範囲コメントは作れない
- 次のコードはコンパイルエラーになる
	- 5 行目の「`/*`」で範囲コメントが始まる（OK）
	- 6 行目先頭の「`/*`」は既にコメントの中にあるため無視される（意図とは違うかもしれないが文法的には OK）
	- 6 行目末尾の「`*/`」がコメントの終わりとして解釈され、最初の範囲コメントが終わる（意図とは違うかもしれないが文法的には OK）
	- 範囲コメントが始まっていないのに、8 行目に「`*/`」が登場する（文法的に NG）

```cpp
#include <iostream>

int main()
{
	/*
	/* この範囲はコメントになる */
	std::cout << "Hello, C++!\n";
	*/
}
```

- 範囲コメントの中に単一行コメントがある場合、単一行コメントは範囲コメントの一部として扱われるため、問題は生じない
- 次のコードは、`/*` から `*/` までが範囲コメントになる

```cpp
#include <iostream>

int main()
{
	/*
	//
	// この範囲はコメントになる
	//
	std::cout << "Hello, C++!\n";
	*/
}
```


## 3. コメントのベストプラクティス

### 3.1 コメントは適度に
- 競技プログラミングでは制限時間が厳しいことも多く、コードを最短・最速で書き切ることが重要になるシーンが多い
- 必要以上に長いコメントは書かないほうがよい場合が多く、最小限の説明にとどめるのがポイント

### 3.2 アルゴリズムの意図を短いコメントで補足
- 競技プログラミングでは複雑なロジックを組む場面も少なくない。「何をしたいのか」をコメントで簡潔に示しておくと、あとでコードを見返すときやデバッグのときに役立つ

### 3.3 テキストエディタのコメント機能を使う
- テキストエディタには、選択した範囲をコメントアウトする機能があることが多い
- VSCode では、複数行を選択した状態で <kbd>Ctrl</kbd> + <kbd>/</kbd>（macOS では <kbd>Cmd</kbd> + <kbd>/</kbd>）を押すと、選択範囲のすべての行に `//` が追加（または削除）される

## 4. コメントと実行時性能
- C++ のコンパイラはコメントを無視するため、プログラムの実行速度やメモリ消費量に直接影響することはない

## 5. コメントの裏技
- 次のような形でコメントを記述すると、先頭を「`//*`」にするか「`/*`」にするかで、コメントアウトの対象が前半と後半で切り替わる
- 一方のコードと他方のコードを交互に切り替えて検証する際に、1 文字だけ変更すればよいので便利
- ただし、あまり知られていないテクニックであり、読む人によっては混乱を招く場合がある

```cpp
#include <iostream>

int main()
{
	//*

	int a = 111;
	std::cout << a;
	
	/*/
	
	int b = 222;
	std::cout << b;
	
	//*/
}
```


## 6. コードの一部範囲を無効化する別の方法
- コメントではないが、コードの一部を無効化する別の方法として、プリプロセッサ `#if 0` と `#endif` を使う方法がある
- `#if 0` と `#endif` で囲まれた範囲は、コンパイル時に無視される
- `#if 0` を `#if 1` に変更することで、無効化したコードを有効化することができる

```cpp
#include <iostream>

int main()
{
	std::cout << "Hello, C++!\n";

#if 0

	std::cout << "Hello, world!\n";

#endif

	std::cout << "Goodbye, C++!\n";
}
```
