---
title: "std::stringï¼ˆC++20 ç‰ˆï¼‰"
free: true
---

`std::string`ï¼ˆã‚¹ãƒˆãƒªãƒ³ã‚°ï¼‰ã¯ C++ ã§æ–‡å­—åˆ—ã‚’ä¾¿åˆ©ã«æ‰±ã†ãŸã‚ã®ã‚¯ãƒ©ã‚¹ã§ã™ã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® `<string>` ãƒ˜ãƒƒãƒ€ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

C++ æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å¤šãã®æ©Ÿèƒ½ãŒ `std::string` ã¨é€£ä¿‚ã™ã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Šã€C++ ã§æ–‡å­—åˆ—ã‚’æ“ä½œã™ã‚‹éš›ã«ã¯ `std::string` ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚


# 1. `std::string` ã®æ§‹é€ 
`std::string` ã®å†…éƒ¨ã§ã¯ `char` å‹ã®å‹•çš„é…åˆ—ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŸã ã—ã€æ–‡å­—åˆ—æ“ä½œã®ãŸã‚ã®æœ€é©åŒ–ã‚„ã€C è¨€èªã¨ã®äº’æ›ã‚’ä¿ã¤ãŸã‚ã®å‡¦ç†ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã€`std::vecotr<char>` ã¨ã¯å°‘ã—ç•°ãªã‚‹å®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚

## 1.1 `std::string` ã®å†…éƒ¨æ§‹é€  (1)
C++ æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ä»»æ„ã®æ–‡å­—å‹ `Char` ã«å¯¾ã—ã¦ã€ä¾¿åˆ©ãªæ–‡å­—åˆ—å‡¦ç†ã‚’æä¾›ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ `std::basic_string<Char>` ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ãã‚Œã‚’ `char` å‹ã«å¯¾ã—ã¦ç‰¹æ®ŠåŒ–ï¼ˆ`std::basic_string<char>`ï¼‰ã—ãŸã‚‚ã®ãŒ `std::string` ã§ã™ã€‚

```cpp
namespace std
{
	// std::string ã¯ std::basic_string<char> ã®å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆåˆ¥åï¼‰
	using string = basic_string<char>;
}
```

`std::basic_string` ã®å†…éƒ¨æ§‹é€ ã‚’ç°¡ç•¥åŒ–ã—ã¦èª¬æ˜ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
template <class Char>
struct basic_string
{
	Char* m_ptr; // ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿
	size_t m_size; // æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•
	size_t m_allocated_capacity; // å‹•çš„ç¢ºä¿ã—ãŸé…åˆ—ã«æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
};
```

ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã¯ `char` ä»¥å¤–ã®æ–‡å­—å‹ã‚’ä½¿ã†ã“ã¨ã¯ã»ã¨ã‚“ã©ãªã„ãŸã‚ã€`Char` ã‚’ `char` ã«å›ºå®šã—ãŸç°¡æ˜“ç‰ˆã§èª¬æ˜ã‚’é€²ã‚ã¾ã™ã€‚

```cpp
struct string
{
	char* m_ptr; // ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿
	size_t m_size; // æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•
	size_t m_allocated_capacity; // å‹•çš„ç¢ºä¿ã—ãŸé…åˆ—ã«æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
};
```

`m_ptr` ã¯æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã«ãƒ¡ãƒ¢ãƒªã®ã©ã“ã‹ã«å‹•çš„ç¢ºä¿ã—ãŸ `char` å‹ã®é…åˆ—ã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã§ã™ã€‚

`m_size` ã¯æ–‡å­—åˆ—ã®é•·ã•ã‚’ç¤ºã—ã¾ã™ã€‚å¾Œè¿°ã™ã‚‹ NULL çµ‚ç«¯æ–‡å­—ã¯ã“ã®æ•°ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚`"hello"` ã¨ã„ã†æ–‡å­—åˆ—ã‚’æ ¼ç´ã—ã¦ã„ã‚‹å ´åˆã¯ 5 ã§ã™ã€‚

`m_allocated_capacity` ã¯ã€ç¾åœ¨å‹•çš„ç¢ºä¿ã—ã¦ã„ã‚‹é…åˆ—ã«æ ¼ç´ã§ãã‚‹ã€æœ€å¤§ã®æ–‡å­—åˆ—ã®é•·ã•ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ NULL çµ‚ç«¯æ–‡å­—ã®åˆ†ã¯å«ã¿ã¾ã›ã‚“ã€‚`m_size <= m_allocated_capacity` ãŒå¸¸ã«æˆã‚Šç«‹ã¡ã¾ã™ã€‚

### ä¾‹ 1
`"hello"` ã¨ã„ã†æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹ `std::string` ã®ä¸­èº«ã®ä¾‹ã‚’å›³ç¤ºã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/1.png)

ç¢ºä¿ã•ã‚ŒãŸä¸€å®šã®ã‚µã‚¤ã‚ºã® `char` å‹ã®é…åˆ—ã®**å…ˆé ­**ã‹ã‚‰ã€æ–‡å­—åˆ—ã®é•·ã•ï¼ˆ`"hello"` ã®å ´åˆã¯ 5ï¼‰åˆ†ã‚’æ¶ˆè²»ã—ã¦ã€æ–‡å­—åˆ—ã®å„è¦ç´ ã‚’ã€**é€£ç¶šã—ã¦**æ ¼ç´ã—ã¾ã™ã€‚æ–‡å­—åˆ—ã‚’æ ¼ç´ã—çµ‚ã‚ã£ãŸç›´å¾Œï¼ˆã“ã“ã§ã¯ `o` ã®ç›´å¾Œï¼‰ã®è¦ç´ ã«ã¯ã€å¿…ãš NULL çµ‚ç«¯æ–‡å­— `'\0'` ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚ã€Œæ–‡å­—åˆ—ã®é•·ã•ã€ã¨ã„ã†ã¨ãã«ã¯ã€NULL çµ‚ç«¯æ–‡å­— `'\0'` ã®åˆ†ã¯å«ã¿ã¾ã›ã‚“ã€‚é…åˆ—ã® NULL çµ‚ç«¯ä»¥é™ã®è¦ç´ ã®çŠ¶æ…‹ã¯ä¸å®šã§ã™ã€‚

### ä¾‹ 2
ä½•ã‚‚æ–‡å­—åˆ—ã‚’æ ¼ç´ã—ã¦ã„ãªã„ã€ç©ºã®çŠ¶æ…‹ã® `std::string` ã®ä¸­èº«ã®ä¾‹ã‚’å›³ç¤ºã—ã¾ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/2.png)

æ ¼ç´ã™ã‚‹æ–‡å­—åˆ—ã®é•·ã•ãŒ 0 ã ã¨ã—ã¦ã‚‚ã€æœ€å¾Œã®æ–‡å­—ã®ç›´å¾Œï¼ˆã“ã“ã§ã¯é…åˆ—ã®å…ˆé ­ï¼‰ã« NULL çµ‚ç«¯æ–‡å­— `'\0'` ã‚’å¿…ãšæ ¼ç´ã™ã‚‹ãŸã‚ã€ä¸€å®šã®ã‚µã‚¤ã‚ºã®é…åˆ—ã¯ç¢ºä¿ã•ã‚Œã¦ã„ã¾ã™ã€‚


### ä¾‹ 3
`m_allocated_capacity` ã¨åŒã˜é•·ã•ã®æ–‡å­—åˆ—ã‚’æ ¼ç´ã—ã¦ã„ã‚‹ `std::string` ã®ä¸­èº«ã‚’å›³ç¤ºã—ã¾ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/3.png)

ã“ã®çŠ¶æ…‹ã‹ã‚‰ã•ã‚‰ã«æ–°ã—ã„è¦ç´ ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€é…åˆ—ã®å†ç¢ºä¿ãŒè¡Œã‚ã‚Œã¾ã™ã€‚ä¾‹ãˆã° `.push_back()` ã‚„ `+=` ãŒå‘¼ã°ã‚Œã‚‹ã¨ã€ã‚ˆã‚Šåºƒã„ `m_allocated_capacity` ã®å€¤ã§é…åˆ—ã‚’å†ç¢ºä¿ã—ã€æ—¢å­˜ã®æ–‡å­—åˆ—ã‚’æ–°ã—ã„é…åˆ—ã«ã‚³ãƒ”ãƒ¼ã—ãŸã®ã¡ã€æ–°ã—ã„è¿½åŠ ã®æ–‡å­—åˆ—ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚å¤ã„é…åˆ—ãŒä½¿ã£ã¦ã„ãŸãƒ¡ãƒ¢ãƒªã¯è§£æ”¾ã•ã‚Œã¾ã™ã€‚


## 1.2 `std::string` ã®å†…éƒ¨æ§‹é€  (2)
å®Ÿéš›ã® `std::string` ã¯ã€ç¾å®Ÿä¸–ç•Œã®æ–‡å­—åˆ—å‡¦ç†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«åˆã‚ã›ã¦ã€ã•ã‚‰ã«å·¥å¤«ã•ã‚ŒãŸå®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€ãã®ä¸€éƒ¨ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ç¾å®Ÿã®æ–‡å­—åˆ—å‡¦ç†ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€`"hello"` ã‚„ `"dog"`, `"atcoder"` ã®ã‚ˆã†ã«ã€æ•°æ–‡å­—ç¨‹åº¦ã®çŸ­ã„æ–‡å­—åˆ—ã‚’ãŸãã•ã‚“æ‰±ã†ã“ã¨ãŒå¤šã„ã§ã™ã€‚ãã®ã‚ˆã†ãªå ´åˆã€`std::string` ãŒæ¯å›é…åˆ—ã®å‹•çš„ç¢ºä¿ï¼ˆå†…éƒ¨ã§ã® `new` ã«ã‚ˆã‚‹ç¢ºä¿ï¼‰ã‚’è¡Œã£ã¦ã„ã‚‹ã¨ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œé€Ÿåº¦ãŒä½ä¸‹ã—ã¦ã—ã¾ã„ã¾ã™ã€‚ãã“ã§ã€ä¸€èˆ¬çš„ãª `std::string` ã§ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ãŒçŸ­ã„å ´åˆã«ãƒ¡ãƒ¢ãƒªã®å‹•çš„ç¢ºä¿ã‚’è¡Œã‚ãªãã¦æ¸ˆã‚€ã‚ˆã†ã€`std::string` å†…ã«å°ã•ãªé…åˆ—ã‚’ç”¨æ„ã—ã€ãã“ã«æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹å·¥å¤«ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’ **SSO (Small String Optimization)** ã¨å‘¼ã³ã¾ã™ã€‚

```cpp
struct string
{
	char* m_ptr; // ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿
	size_t m_size; // æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•
	size_t m_allocated_capacity; // å‹•çš„ç¢ºä¿ã—ãŸé…åˆ—ã«æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
	
	static constexpr size_t LocalCapacity = 15; // å‹•çš„ç¢ºä¿ä¸è¦ã§æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
	char m_local_buffer[LocalCapacity + 1]; // æ–‡å­—åˆ—ã®é•·ã•ãŒ LocalCapacity ä»¥ä¸‹ã®å ´åˆã€å‹•çš„ç¢ºä¿ã®ä»£ã‚ã‚Šã«ä½¿ã†é…åˆ—
};
```

`m_local_buffer` ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ãŒ `LocalCapacity` ä»¥ä¸‹ã®å ´åˆã«ä½¿ã†ã“ã¨ã®ã§ãã‚‹é…åˆ—ã§ã™ã€‚

`LocalCapacity` ã®å€¤ã¯ã€`std::string` ã®å®Ÿè£…ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ãŒã€ä¸€èˆ¬ã«ã¯ 15 ç¨‹åº¦ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®å€¤ãŒå¤§ãã„ã»ã©ã€ã‚ˆã‚Šé•·ã„æ–‡å­—åˆ—ã‚’ãƒ¡ãƒ¢ãƒªã®å‹•çš„ç¢ºä¿ã‚’è¡Œã‚ãšã«æ ¼ç´ã§ãã¾ã™ãŒã€`std::string` è‡ªä½“ã®ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚Šã€ç©ºã®æ–‡å­—åˆ—ã‚„ 1 æ–‡å­—ã®æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹éš›ã«ã‚‚å¤§ããªãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã„ã¾ã™ã€‚ã‚„ã¿ãã‚‚ã«å¤§ããã™ã‚Œã°é«˜é€ŸåŒ–ã§ãã‚‹ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

æ–‡å­—åˆ—ã®æ ¼ç´ã« `m_local_buffer` ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€`m_ptr` ã¯ `m_local_buffer` ã®å…ˆé ­ã‚’æŒ‡ã—ã¾ã™ã€‚ãã®ã¨ãã®æ–‡å­—åˆ—ã® `.capacity()` ã¯ `LocalCapacity` ã§ã™ã€‚

```cpp
struct string
{
	char* m_ptr; // ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿
	size_t m_size; // æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•
	size_t m_allocated_capacity; // å‹•çš„ç¢ºä¿ã—ãŸé…åˆ—ã«æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
	
	static constexpr size_t LocalCapacity = 15; // å‹•çš„ç¢ºä¿ä¸è¦ã§æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
	char m_local_buffer[LocalCapacity + 1]; // æ–‡å­—åˆ—ã®é•·ã•ãŒ LocalCapacity ä»¥ä¸‹ã®å ´åˆã€å‹•çš„ç¢ºä¿ã®ä»£ã‚ã‚Šã«ä½¿ã†é…åˆ—

	size_t capacity() const noexcept
	{
		if (is_local())
		{
			return LocalCapacity;
		}
		else
		{
			return m_allocated_capacity;
		}
	}

	// å†…éƒ¨é–¢æ•°: æ–‡å­—åˆ—ãŒ m_local_buffer ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’è¿”ã™
	bool _is_local() const noexcept
	{
		return (m_ptr == m_local_buffer);
	}
};
```

æ‰‹å…ƒã§ä½¿ç”¨ã—ã¦ã„ã‚‹æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å®Ÿè£…ãŒæ¡ç”¨ã—ã¦ã„ã‚‹ `LocalCapacity` ã®å€¤ã‚’èª¿ã¹ã‚‹ã«ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ§‹ç¯‰ã—ãŸ `std::string` ã® `.capacity()` ã®å€¤ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s; // ç©ºã®æ–‡å­—åˆ—ã® std::string ã‚’æ§‹ç¯‰ã™ã‚‹
	std::cout << s.capacity() << '\n';
}
```

## 1.3 `std::string` ã®å†…éƒ¨æ§‹é€  (3)
1.2 ã‹ã‚‰å°‘ã—ã ã‘æ¶ˆè²»ãƒ¡ãƒ¢ãƒªã‚’ç¯€ç´„ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã« `union` ã‚’ç”¨ã„ã¦ `m_local_buffer` ã¨ `m_allocated_capacity` ã‚’åŒã˜ãƒ¡ãƒ¢ãƒªé ˜åŸŸã«é…ç½®ã—ã¾ã™ã€‚å®Ÿéš›ã€`m_local_buffer` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ãã¯ `m_allocated_capacity` ã¯ä½¿ã‚ãªã„ãŸã‚ã€åˆç†çš„ã§ã™ã€‚1.2 ã® `std::string` ã®å®Ÿè£…ã¨æ¯”ã¹ã‚‹ã¨ã€`sizeof(std::string)` ã¯ 40 ãƒã‚¤ãƒˆã‹ã‚‰ 32 ãƒã‚¤ãƒˆã«æ¸›ã‚Šã¾ã™ã€‚gcc ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã“ã®å®Ÿè£…ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
struct string
{
	char* m_ptr; // ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿
	size_t m_size; // æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•

	static constexpr size_t LocalCapacity = 15; // å‹•çš„ç¢ºä¿ä¸è¦ã§æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•

	union
	{
		char m_local_buffer[LocalCapacity + 1]; // æ–‡å­—åˆ—ã®é•·ã•ãŒ LocalCapacity ä»¥ä¸‹ã®å ´åˆã€å‹•çš„ç¢ºä¿ã®ä»£ã‚ã‚Šã«ä½¿ã†é…åˆ—
		size_t m_allocated_capacity; // å‹•çš„ç¢ºä¿ã—ãŸé…åˆ—ã«æ ¼ç´ã§ãã‚‹æ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•
	} m_storage;
};
```

# 2. C è¨€èªã®æ–‡å­—åˆ—ã¨ã®ç›¸äº’é‹ç”¨æ€§
C++ ã® `std::string` ã‚¯ãƒ©ã‚¹ã¯ã€C è¨€èªã®æ–‡å­—åˆ—ã¨ç°¡å˜ã«ç›¸äº’é‹ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ä¸»ã« C è¨€èªã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ API ã¨é€£æºã™ã‚‹ã¨ãã«ä¾¿åˆ©ã§ã™ã€‚`std::string` ãŒ NULL çµ‚ç«¯æ–‡å­— `'\0'` ã‚’æŒã£ã¦ã„ã‚‹ä¸»ãªç†ç”±ã‚‚ã€ã“ã®äº’æ›æ€§ã‚’ä¿ã¤ãŸã‚ã§ã™ã€‚

## 2.1 `.c_str()` ã‚’ä½¿ç”¨ã™ã‚‹

`std::string` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ãƒ³ãƒé–¢æ•° `.c_str()` ã¯ã€C è¨€èªã®æ–‡å­—åˆ—ï¼ˆ`char` å‹ã®é…åˆ—ã« NULL çµ‚ç«¯æ–‡å­— `'\0'` ãŒä»˜ã„ãŸã‚‚ã®ã€‚å…·ä½“çš„ã«ã¯ 1.1 ã® `m_ptr`ï¼‰ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®ãƒ¡ãƒ³ãƒé–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€`std::string` ã‚’ã€NULL çµ‚ç«¯ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’è¦æ±‚ã™ã‚‹ C è¨€èªã®é–¢æ•°ã§ä½¿ç”¨ã§ãã¾ã™ã€‚

```cpp
#include <string>
#include <cstdio>

int main()
{
	std::string s = "hello";
	printf("%s\n", s.c_str()); // NULL çµ‚ç«¯ã•ã‚Œã¦ã„ã‚‹ãŠã‹ã’ã§ã€C è¨€èªã®é–¢æ•°ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹
}
```
```txt:å‡ºåŠ›
hello
```


## 2.2 æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¯ `std::string` å‹ã§ã¯ãªã„
C++ ã«ãŠã„ã¦ã€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ï¼ˆä¾‹ï¼š`"hello"`ï¼‰ã¯ `std::string` å‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚‚ã—ãã†ã§ã‚ã‚Œã°ã€`"hello".size()` ã®ã‚ˆã†ã«ãƒ¡ãƒ³ãƒé–¢æ•°ã‚’å‘¼ã³å‡ºã›ã¾ã™ãŒã€å®Ÿéš›ã«ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

C++ ã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¯ `const char[]` å‹ã€ã¤ã¾ã‚Šèª­ã¿å–ã‚Šå°‚ç”¨ã® `char` å‹ã®é…åˆ—ã§ã™ã€‚ãã®é…åˆ—ã¯ NULL çµ‚ç«¯ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ C è¨€èªã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ä»•æ§˜ã‚’ãŠãŠã‚ˆãå¼•ãç¶™ã„ã ã‚‚ã®ã§ã™ã€‚

```cpp
const char* s = "hello";  // 's' ã¯ `const char[6]` å‹ã¸ã®ãƒã‚¤ãƒ³ã‚¿
```

ä¸Šè¨˜ã® `"hello"` ã¯ 6 å€‹ã®è¦ç´ ï¼ˆ`'h'`, `'e'`, `'l'`, `'l'`, `'o'`, `'\0'`ï¼‰ã‚’æŒã¤é…åˆ—ï¼ˆ`const char[]` å‹ï¼‰ã§ã™ã€‚ã“ã®ã‚ˆã†ã« NULL çµ‚ç«¯ã•ã‚ŒãŸ `char` æ–‡å­—åˆ—ã‚’ã€`std::string` ã«ã‚ˆã£ã¦è¡¨ç¾ã™ã‚‹æ–‡å­—åˆ—ã¨åŒºåˆ¥ã™ã‚‹ãŸã‚ã€ã€ŒC è¨€èªã®æ–‡å­—åˆ—ã€ã¨ã„ã„ã¾ã™ã€‚


## 2.3 `std::string` ã¸å¤‰æ›ã™ã‚‹
C è¨€èªã®æ–‡å­—åˆ—ã‹ã‚‰ `std::string` ã«å¤‰æ›ã™ã‚‹ã®ã¯ç°¡å˜ã§ã™ã€‚

```cpp
std::string word = "hello";
```

```cpp
const char* s = "hello";
std::string word = s;
```


# 3. `std::string` ã®æ§‹ç¯‰
ã“ã“ã§ã¯ã€`std::string` ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## 3.1 æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹
- æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã£ã¦ `std::string` ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abc";
	std::cout << s << '\n'; // ä¿æŒã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s.size() << '\n'; // è¦ç´ æ•°ã‚’å‡ºåŠ›ã™ã‚‹
}
```
```txt:å‡ºåŠ›
abc
3
```

## 3.2 (å€‹æ•°) Ã— (æ–‡å­—) ã§æ§‹ç¯‰ã™ã‚‹
- `std::string s(n, ch);` ã¯ã€`n` å›ç¹°ã‚Šè¿”ã™æ–‡å­— `ch` ã‹ã‚‰ãªã‚‹æ–‡å­—åˆ—ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
- `n` ã¨ `ch` ã®é †ç•ªã‚’æ€ã„å‡ºã›ãªã„æ™‚ã¯ã€ã€Œ5 å€‹ã® aã€ã‚’è‹±èªã«ã™ã‚‹ã¨ `5 a's` ã«ãªã‚‹ã“ã¨ã‹ã‚‰ã€`n` ãŒå…ˆã«ãã‚‹ã“ã¨ã‚’æ€ã„å‡ºã›ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s(5, 'a'); // 5 å€‹ã® 'a'
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
aaaaa
5
```

## 3.3 åˆ¥ã® `std::string` ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹
- åˆ¥ã® `std::string` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„ `std::string` ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abc";
	std::string t = s; // s ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
	std::cout << t << '\n';
	std::cout << t.size() << '\n';
	std::cout << s << '\n'; // ã‚³ãƒ”ãƒ¼å…ƒã¯å¤‰åŒ–ã—ã¦ã„ãªã„
	std::cout << s.size() << '\n'; // ã‚³ãƒ”ãƒ¼å…ƒã¯å¤‰åŒ–ã—ã¦ã„ãªã„
}
```
```txt:å‡ºåŠ›
abc
3
abc
3
```

## 3.4 è¤‡æ•°ã®æ–‡å­—ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹
- `std::string s = { 'a', 'b', 'c' };` ã®ã‚ˆã†ã«ã—ã¦ã€è¤‡æ•°ã®æ–‡å­—ã‹ã‚‰ `std::string` ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	char c1 = 'a';
	char c2 = 'b';
	char c3 = 'c';
	std::string s = { c1, c2, c3 };
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
abc
3
```


## 3.5 ç©ºã®æ–‡å­—åˆ—
- `std::string` å‹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€è¦ç´ æ•°ãŒ 0 ã§ã‚ã‚‹ç©ºã® `std::string` ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã§ã‚ã£ã¦ã‚‚ã€ä½•ã®å•é¡Œã‚‚ãªããƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s; // ç©ºã®æ–‡å­—åˆ—ã‚’æ§‹ç¯‰ã™ã‚‹
	std::cout << s << '\n'; // å‡ºåŠ›ã™ã‚‹ï¼ˆä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ï¼‰
	std::cout << s.size() << '\n'; // é•·ã•ã¯ 0
}
```
```txt:å‡ºåŠ›

0
```


# 4. `std::string` ã¸ã®å…¥åŠ›

## 4.1 æ¨™æº–å…¥åŠ›ã®åŸºæœ¬
- `std::string` å‹ã®å¤‰æ•°ã«å¯¾ã™ã‚‹ `std::cin` ã¯ã€æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿å–ã£ãŸæ–‡å­—åˆ—ã‚’å¤‰æ•°ã«æ ¼ç´ã—ã¾ã™ã€‚
- åŒºåˆ‡ã‚Šï¼ˆæ”¹è¡Œã‚„ç©ºç™½æ–‡å­—ã€çµ‚ç«¯ï¼‰ãŒå‡ºç¾ã™ã‚‹ã¾ã§ã®é€£ç¶šã™ã‚‹æ–‡å­—ã‚’ 1 ã¤ã®æ–‡å­—åˆ—ã¨ã—ã¦èª­ã¿è¾¼ã¿ã¾ã™ã€‚
- åŒºåˆ‡ã‚Šã¨è¦‹ãªã•ã‚ŒãŸæ”¹è¡Œæ–‡å­—ã‚„ç©ºç™½æ–‡å­—ã¯é™¤å»ã•ã‚Œã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s;
	std::cin >> s; // æ¨™æº–å…¥åŠ›ã‹ã‚‰å˜èªã‚’èª­ã¿è¾¼ã‚€
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å…¥åŠ›
apple
```
```txt:å‡ºåŠ›
apple
5
```
## 4.2 è¤‡æ•°å€‹ã®å…¥åŠ›ã‚’å—ã‘å–ã‚‹
- è¤‡æ•°ã®æ–‡å­—åˆ—ã®å…¥åŠ›ã«ã¯æ¬¡ã®ã‚ˆã†ã«å¯¾å¿œã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s, t, u;

	 // æ¨™æº–å…¥åŠ›ã‹ã‚‰ 3 ã¤ã®å˜èªã‚’èª­ã¿è¾¼ã‚€
	std::cin >> s;
	std::cin >> t;
	std::cin >> u;

	std::cout << s << '\n';
	std::cout << s.size() << '\n';
	std::cout << t << '\n';
	std::cout << t.size() << '\n';
	std::cout << u << '\n';
	std::cout << u.size() << '\n';
}
```
```txt:å…¥åŠ›
apple
bird
cat
```
```txt:å‡ºåŠ›
apple
5
bird
4
cat
3
```


- `>>` ã‚’é€£ç¶šã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜å‹•ä½œã‚’ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s, t, u;
	std::cin >> s >> t >> u; // æ¨™æº–å…¥åŠ›ã‹ã‚‰ 3 ã¤ã®å˜èªã‚’èª­ã¿è¾¼ã‚€

	std::cout << s << '\n';
	std::cout << s.size() << '\n';
	std::cout << t << '\n';
	std::cout << t.size() << '\n';
	std::cout << u << '\n';
	std::cout << u.size() << '\n';
}
```
```txt:å…¥åŠ›
apple
bird
cat
```
```txt:å‡ºåŠ›
apple
5
bird
4
cat
3
```

## 4.3 åŠè§’ç©ºç™½ã§åŒºåˆ‡ã‚‰ã‚ŒãŸå…¥åŠ›ã‚’å—ã‘å–ã‚‹
- 1 è¡Œã®å…¥åŠ›ã®é€”ä¸­ã«ã‚ã‚‹ç©ºç™½æ–‡å­—ã‚‚ã€æ”¹è¡Œã¨åŒæ§˜ã«å…¥åŠ›ã®åŒºåˆ‡ã‚Šã¨è¦‹ãªã•ã‚Œã¾ã™ã€‚
- åŒºåˆ‡ã‚Šã¨è¦‹ãªã•ã‚ŒãŸç©ºç™½æ–‡å­—ã¯é™¤å»ã•ã‚Œã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s, t;
	std::cin >> s >> t; // æ¨™æº–å…¥åŠ›ã‹ã‚‰ 2 ã¤ã®å˜èªã‚’èª­ã¿è¾¼ã‚€

	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	std::cout << t << '\n';
	std::cout << t.size() << '\n';
}
```
```txt:å…¥åŠ›
blue ocean
```
```txt:å‡ºåŠ›
blue
4
ocean
5
```

## 4.4 ä¸¸ã”ã¨ 1 è¡Œã®å…¥åŠ›ã‚’å—ã‘å–ã‚‹
- ç©ºç™½æ–‡å­—ã‚’å«ã‚€ 1 è¡Œã‚’ä¸¸ã”ã¨èª­ã¿è¾¼ã¿ãŸã„å ´åˆã¯ `std::getline()` ã‚’ä½¿ã„ã¾ã™ã€‚
- æœ«å°¾ã®æ”¹è¡Œæ–‡å­—ã¯é™¤å»ã•ã‚Œã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s;
	std::getline(std::cin, s); // æ¨™æº–å…¥åŠ›ã‹ã‚‰ 1 è¡Œã‚’èª­ã¿è¾¼ã‚€
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å…¥åŠ›
blue ocean
```
```txt:å‡ºåŠ›
blue ocean
10
```

## 4.5 ã€ã‚µãƒ³ãƒ—ãƒ«ã€‘ãŸãã•ã‚“ã®å˜èªã‚’èª­ã¿è¾¼ã‚€
- æœ€åˆã«å˜èªã®å€‹æ•° $N$, ç¶šã„ã¦ $N$ å€‹ã®å˜èªãŒå…¥åŠ›ã•ã‚Œã‚‹å•é¡Œã«ãŠã„ã¦ã€å…¥åŠ›ã•ã‚Œã‚‹ã™ã¹ã¦ã®å˜èªã‚’ `std::vector<std::string>` ã«èª­ã¿è¾¼ã‚“ã§æ ¼ç´ã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>
#include <vector>

int main()
{
	int N;
	std::cin >> N; // å˜èªã®å€‹æ•°

	std::vector<std::string> words(N);
	for (auto& word : words) // N å›ç¹°ã‚Šè¿”ã™
	{
		std::cin >> word;
	}

	for (const auto& word : words)
	{
		std::cout << word << "!\n";
	}
}
```
```txt:å…¥åŠ›
4
red
green
blue
yellow
```
```txt:å‡ºåŠ›
red!
green!
blue!
yellow!
```


## 4.6 ã€ã‚µãƒ³ãƒ—ãƒ«ã€‘ãŸãã•ã‚“ã®å˜èªã‚’èª­ã¿è¾¼ã‚€ï¼ˆå…¥åŠ›å€‹æ•°ãŒä¸ãˆã‚‰ã‚Œãªã„å ´åˆï¼‰
- ä¸€éƒ¨ã®ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§ã¯ã€4.5 ã®ã‚ˆã†ãªå•é¡Œã§ã€å…¥åŠ›ã•ã‚Œã‚‹å˜èªæ•°ãŒä¸ãˆã‚‰ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ `std::cin >> s` ã‚’ `while( )` ã§ãƒ«ãƒ¼ãƒ—ã—ã¾ã™ã€‚
- å…¥åŠ›ãŒã“ã‚Œä»¥ä¸Šå­˜åœ¨ã—ãªããªã£ãŸã¨ãã€`(std::cin >> s)` ã®æ¡ä»¶éƒ¨åˆ†ãŒ `false` ã«ãªã‚Šã€ãã‚Œã«ä¼´ã£ã¦ãƒ«ãƒ¼ãƒ—ãŒçµ‚äº†ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>
#include <vector>

int main()
{
	std::vector<std::string> words;
	std::string in;
	while (std::cin >> in) // å…¥åŠ›ãŒå­˜åœ¨ã—ãªããªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™
	{
		words.push_back(in);
	}

	for (const auto& word : words)
	{
		std::cout << word << "!\n";
	}
}
```
```txt:å…¥åŠ›
red
green
blue
yellow
```
```txt:å‡ºåŠ›
red!
green!
blue!
yellow!
```


# 5. æ–‡å­—åˆ—ã®é•·ã•

## 5.1 è¦ç´ æ•°ã‚’èª¿ã¹ã‚‹
- `.size()` ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ï¼ˆè¦ç´ æ•°ï¼‰ã‚’ç¬¦å·ç„¡ã—æ•´æ•°å‹ã®å€¤ã§è¿”ã—ã¾ã™ã€‚
- åŒã˜åŠ¹æœã‚’æŒã¤ãƒ¡ãƒ³ãƒé–¢æ•°ã¨ã—ã¦ `.length()` ã‚‚ã‚ã‚Šã¾ã™ã€‚
- ä¾‹ãˆã° `std::vector` ã«ã¯ `.length()` ãŒç„¡ã `.size()` ãŒã‚ã‚‹ãŸã‚ã€`std::vector` ã¨ã‚³ãƒ¼ãƒ‰ã‚’å…±é€šåŒ–ã™ã‚‹ãŸã‚ã«ã€`std::string` ã«ã¤ã„ã¦å¸¸ã« `.size()` ã‚’ä½¿ã†ã¨ã„ã†æ–¹é‡ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãã†ã™ã‚Œã°ã€`std::string` ã®ãŸã‚ã«æ›¸ã„ãŸé–¢æ•°ã‚’ `std::vector` ç”¨ã«æ›¸ãæ›ãˆã‚‹éš›ã®è² æ‹…ãŒæ¸›ã‚Šã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abc";
	std::cout << s.size() << '\n'; // è¦ç´ æ•°ã‚’å‡ºåŠ›ã™ã‚‹

	s = "apple";
	std::cout << s.size() << '\n';
	std::cout << s.length() << '\n'; // .size() ã¨åŒã˜

	std::size_t n = s.size();
	std::cout << n << '\n';
}
```
```txt:å‡ºåŠ›
3
5
5
5
```

## 5.2 ç©ºã®æ–‡å­—åˆ—ã§ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹
- `.empty()` ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ãŒ 0ï¼ˆç©ºã®æ–‡å­—åˆ—ï¼‰ã§ã‚ã‚‹ã‹ã‚’ `bool` å‹ã®å€¤ã§è¿”ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1;

	if (s1.empty()) // ç©ºã®æ–‡å­—åˆ—ãªã®ã§ true
	{
		std::cout << "s1 is empty.\n";
	}

	std::string s2 = "abc";

	if (s2.empty()) // ç©ºã®æ–‡å­—åˆ—ã§ã¯ãªã„ã®ã§ false
	{
		std::cout << "s2 is empty.\n";
	}
}
```
```txt:å‡ºåŠ›
s1 is empty.
```


## 5.3 å†…éƒ¨ã§ç¢ºä¿ã—ã¦ã„ã‚‹é…åˆ—ã®ã‚µã‚¤ã‚ºã‚’èª¿ã¹ã‚‹
- 1.1 ã§èª¬æ˜ã—ãŸã‚ˆã†ã«ã€`std::string` ã¯å†…éƒ¨ã§æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã«ã€å®Ÿéš›ã®æ–‡å­—åˆ—ã‚ˆã‚Šã‚‚é•·ã„é…åˆ—ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ã€‚`.capacity()` ã¯ã€ç¾åœ¨ç¢ºä¿ã—ã¦ã„ã‚‹é…åˆ—ã«æ ¼ç´å¯èƒ½ãªæ–‡å­—åˆ—ã®æœ€å¤§ã®é•·ã•ã‚’è¿”ã—ã¾ã™ã€‚
- `.size() <= .capacity()` ãŒå¸¸ã«æˆã‚Šç«‹ã¡ã¾ã™ã€‚
- `.capacity()` ãŒè¿”ã™é•·ã•ä»¥ä¸‹ã®æ–‡å­—åˆ—ã‚’æ ¼ç´ã™ã‚‹ã‹ãã‚Šã«ãŠã„ã¦ã¯ã€æ–°ã—ã„é…åˆ—ã®å†ç¢ºä¿ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abc";
	std::cout << s.size() << '\n'; // è¦ç´ æ•°ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s.capacity() << '\n'; // ç¢ºä¿ã—ã¦ã„ã‚‹é…åˆ—ã®ã‚µã‚¤ã‚ºã‚’å‡ºåŠ›ã™ã‚‹

	s = "abcdefghijklmnopqrstuvwxyz";
	std::cout << s.size() << '\n'; 
	std::cout << s.capacity() << '\n';
}
```
```txt:å‡ºåŠ›ä¾‹
3
15
26
30
```


# 6. `std::string` ã¸ã®ä»£å…¥

## 6.1 åˆ¥ã®æ–‡å­—åˆ—ã‚’ä»£å…¥ã™ã‚‹
- `=` ã‚’ä½¿ã£ã¦åˆ¥ã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚„ `std::string` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ–‡å­—åˆ—ã‚’ä»£å…¥ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abc";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s = "apple"; // "apple" ã‚’ä»£å…¥ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	std::string t = "bird";
	s = t; // t ã®å€¤ã‚’ä»£å…¥ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
abc
3
apple
5
bird
4
```


# 7. `std::string` ã®æ¯”è¼ƒ

## 7.1 åŒã˜æ–‡å­—åˆ—ã§ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹
- `a`, `b` ã®å°‘ãªãã¨ã‚‚ä¸€æ–¹ãŒ `std::string` å‹ã§ã‚ã‚‹å ´åˆã€`a == b` ã¯ 2 ã¤ã®æ–‡å­—åˆ— `a`, `b` ãŒä¸€è‡´ã™ã‚‹ã‹ã‚’ `bool` å‹ã®å€¤ã§è¿”ã—ã¾ã™ã€‚

> - `std::string` ã©ã†ã—ã® `==` ã®è¨ˆç®—é‡: æœ€åˆã«åŒæ–¹ã®è¦ç´ æ•°ãŒåŒã˜ã‹ã‚’èª¿ã¹ã‚‹ãŸã‚ã€åŒæ–¹ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹å ´åˆã¯ $O(1)$, ãã‚Œä»¥å¤–ã®å ´åˆã¯ $O(N)$

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1 = "cat";
	std::string s2 = "dog";

	std::cout << std::boolalpha; // bool å‹ã®å€¤ã‚’ true / false ã§è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã®ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿
	std::cout << (s1 == "cat") << '\n';
	std::cout << (s2 == "cat") << '\n';
	std::cout << (s1 == s1) << '\n';
	std::cout << (s1 == s2) << '\n';
}
```
```txt:å‡ºåŠ›
true
false
true
false
```

## 7.2 é•ã†æ–‡å­—åˆ—ã§ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹
- `a`, `b` ã®å°‘ãªãã¨ã‚‚ä¸€æ–¹ãŒ `std::string` å‹ã§ã‚ã‚‹å ´åˆã€`a != b` ã¯ 2 ã¤ã®æ–‡å­—åˆ— `a`, `b` ãŒç•°ãªã‚‹ã‹ã‚’ `bool` å‹ã®å€¤ã§è¿”ã—ã¾ã™ã€‚

> - `std::string` ã©ã†ã—ã® `!=` ã®è¨ˆç®—é‡: æœ€åˆã«åŒæ–¹ã®è¦ç´ æ•°ãŒé•ã†ã‹ã‚’èª¿ã¹ã‚‹ãŸã‚ã€åŒæ–¹ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹å ´åˆã¯ $O(1)$, ãã‚Œä»¥å¤–ã®å ´åˆã¯ $O(N)$

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1 = "cat";
	std::string s2 = "dog";

	std::cout << std::boolalpha; // bool å‹ã®å€¤ã‚’ true / false ã§è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã®ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿
	std::cout << (s1 != "cat") << '\n';
	std::cout << (s2 != "cat") << '\n';
	std::cout << (s1 != s1) << '\n';
	std::cout << (s1 != s2) << '\n';
}
```
```txt:å‡ºåŠ›
false
true
false
true
```

## 7.3 æ–‡å­—åˆ—ã®é †åºæ¯”è¼ƒ
- `a`, `b` ã®å°‘ãªãã¨ã‚‚ä¸€æ–¹ãŒ `std::string` å‹ã§ã‚ã‚‹å ´åˆã€`a < b`, `a <= b`, `a > b`, `a >= b` ã¯ 2 ã¤ã®æ–‡å­—åˆ—ã®é †åºé–¢ä¿‚ã‚’ `bool` å‹ã®å€¤ã§è¿”ã—ã¾ã™ã€‚
- åŸºæœ¬ã®é †åº: `0 < 9 < A < Z < a < z`  
  - å‚è€ƒ: [ASCII ã‚³ãƒ¼ãƒ‰è¡¨](https://www.k-cube.co.jp/wakaba/server/ascii_code.html)  
- é †åºã®ä¾‹: `A < AA < AB < ABC < Aa < Ab < B < BA < Z < ZZ < a < aA < aa < b < zzz`  
- å¤§æ–‡å­—ã¨å°æ–‡å­—ãŒæ··åœ¨ã™ã‚‹å ´åˆã®é †åºã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1 = "cat";
	std::string s2 = "dog";

	std::cout << std::boolalpha; // bool å‹ã®å€¤ã‚’ true / false ã§è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã®ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿
	std::cout << (s1 < s2) << '\n';
	std::cout << (s1 < "dog") << '\n';
	std::cout << ("caa" < s1) << '\n';
	std::cout << ("Dog" < s2) << '\n';
}
```
```txt:å‡ºåŠ›
true
true
true
true
```


# 8. è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

## 8.1 æŒ‡å®šã—ãŸä½ç½®ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `s[index]` ã§ã€æ–‡å­—åˆ—å†…ã®æŒ‡å®šã—ãŸä½ç½®ã®è¦ç´  (`char` å‹) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ 0-indexed ã§ã™ã€‚ã¤ã¾ã‚Šã€å…ˆé ­ã®æ–‡å­—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒ `0` ã§ã€ãã®æ¬¡ãŒ `1`, ..., `(.size() - 1)` ã§ã™ã€‚
- ç¯„å›²å¤–ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ï¼ˆä¾‹å¤–: 8.5ï¼‰ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "cat";
	std::cout << s[0] << '\n'; // 0 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s[1] << '\n'; // 1 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s[2] << '\n'; // 2 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹

	s[2] = 'n'; // 2 ç•ªç›®ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹
	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
c
a
t
can
```

## 8.2 å…ˆé ­ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `.front()` ã§ã€æ–‡å­—åˆ—ã®å…ˆé ­ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã§ä½¿ã†ã¨ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã«ãªã‚‹ãŸã‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
- æ–‡å­—åˆ—ãŒç©ºã§ãªã‘ã‚Œã° `s[0]` ã¨ã»ã¼åŒç­‰ã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "cat";
	std::cout << s.front() << '\n'; // å…ˆé ­ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹

	s.front() = 'h'; // å…ˆé ­ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹
	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
c
hat
```

## 8.3 æœ«å°¾ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `.back()` ã§ã€æ–‡å­—åˆ—ã®æœ«å°¾ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã§ä½¿ã†ã¨ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã«ãªã‚‹ãŸã‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
- æ–‡å­—åˆ—ãŒç©ºã§ãªã‘ã‚Œã° `s[(s.size() - 1)]` ã¨åŒç­‰ã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "cat";
	std::cout << s.back() << '\n'; // æœ«å°¾ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹

	s.back() = 'r'; // æœ«å°¾ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹
	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
t
car
```

## 8.4 æŒ‡å®šã—ãŸä½ç½®ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ï¼ˆç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¾‹å¤–ã§æ¤œå‡ºï¼‰
- `.at(index)` ã§ã€æŒ‡å®šã—ãŸä½ç½®ã®è¦ç´  (`char` å‹) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ `s[index]` ã¨åŒã˜ã 0-indexed ã§ã™ã€‚
- é–¢æ•°ã®æˆ»ã‚Šå€¤ã¯ `s[index]` ã¨åŒã˜ã§ã™ãŒã€ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã£ãŸå ´åˆã« `std::out_of_range` ä¾‹å¤–ã‚’é€å‡ºã—ã¦çŸ¥ã‚‰ã›ã¦ãã‚Œã¾ã™ã€‚
- ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚§ãƒƒã‚¯ã®ãŸã‚ã«å†…éƒ¨å‡¦ç†ã§ `if` ã‚’ä½¿ã†ãŸã‚ã€ãƒã‚§ãƒƒã‚¯ã®ç„¡ã„ `s[index]` ã¨æ¯”ã¹ã‚‹ã¨å°‘ã—é…ããªã‚Šã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "cat";
	std::cout << s.at(0) << '\n'; // 0 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s.at(1) << '\n'; // 1 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹
	std::cout << s.at(2) << '\n'; // 2 ç•ªç›®ã®è¦ç´ ã‚’å‡ºåŠ›ã™ã‚‹

	s.at(2) = 'n'; // 2 ç•ªç›®ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹
	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
c
a
t
can
```


## 8.5 NULL çµ‚ç«¯æ–‡å­—ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `std::string` ã®é•·ã•ãŒ `N` ã®å ´åˆã€`s[N]` ã¯ NULL çµ‚ç«¯æ–‡å­— `'\0'` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚`s[N]` ã¸ã®æ›¸ãè¾¼ã¿æ“ä½œã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ãŒã€èª­ã¿è¾¼ã¿æ“ä½œã¯å¯èƒ½ã§ã™ã€‚
- ã“ã‚Œã¯ `std::string` ãŒæœ«å°¾ã« NULL çµ‚ç«¯æ–‡å­—ã‚’å¸¸ã«æŒã¤ã“ã¨ã«ç”±æ¥ã™ã‚‹ä»•æ§˜ã§ã€é•·ã•ãŒ `N` ã®é…åˆ—ã‚„ `std::vector` ã§ã¯ `v[N]` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã¨ã¯å¯¾ç…§çš„ã§ã™ã€‚
- `.at(N)` ã‚„ `.front()`, `.back()` ã§ã¯ NULL çµ‚ç«¯æ–‡å­—ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
- é€šå¸¸ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ `s[N]` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ãªçŠ¶æ³ã¯ã»ã¨ã‚“ã©ãªã„ãŸã‚ã€ã“ã®ä»•æ§˜ã‚’æ„è­˜ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚


```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s;
	char ch = s[0]; // NULL çµ‚ç«¯ã®ä½ç½®ã®è¦ç´ ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã¯å¯èƒ½

	if (ch == '\0')
	{
		std::cout << "s[0] is NULL.\n";
	}

	// NG: NULL çµ‚ç«¯ã®ä½ç½®ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã¦ã¯ã„ã‘ãªã„
	//s[0] = 'a';
}
```
```txt:å‡ºåŠ›
s[0] is NULL.
```


# 9. åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹å„è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

## 9.1 ç¯„å›²ãƒ™ãƒ¼ã‚¹ `for` æ–‡ã‚’ä½¿ã„ã€å„è¦ç´ ã« `const` å‚ç…§ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `std::string` ã«å¯¾ã™ã‚‹ç¯„å›²ãƒ™ãƒ¼ã‚¹ `for` æ–‡ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ã ã‘ç¹°ã‚Šè¿”ã™ãƒ«ãƒ¼ãƒ—ã§ã™ã€‚
- ãƒ«ãƒ¼ãƒ—å†…ã§è¦ç´ ã‚’æ›¸ãæ›ãˆãªã„å ´åˆã€`const` å‚ç…§ã‚’ä½¿ã„ã¾ã™ã€‚
- `std::string` ã«å¯¾ã™ã‚‹ç¯„å›²ãƒ™ãƒ¼ã‚¹ for ãƒ«ãƒ¼ãƒ—ã¯ã€**æ–‡å­—åˆ—ã®è¦ç´ æ•°ãŒãƒ«ãƒ¼ãƒ—ä¸­ã«å¤‰æ›´ã•ã‚Œãªã„**ã¨ã„ã†å‰æã§å‹•ä½œã™ã‚‹ãŸã‚ã€çµ¶å¯¾ã«ãƒ«ãƒ¼ãƒ—å†…ã§ãã®æ–‡å­—åˆ—ã®è¦ç´ æ•°ã‚’å¢—æ¸›ã•ã›ã‚‹æ“ä½œã‚’ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ï¼ˆ9.3 å‚ç…§ï¼‰ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";

	// è¦ç´ ã®å€‹æ•°ã ã‘ç¹°ã‚Šè¿”ã™ãƒ«ãƒ¼ãƒ—ã€ch ã¯é †ã«å„è¦ç´ ã¸ã® const å‚ç…§
	for (const auto& ch : s)
	{
		std::cout << ch << '\n';
	}
}
```
```txt:å‡ºåŠ›
a
p
p
l
e
```

## 9.2 ç¯„å›²ãƒ™ãƒ¼ã‚¹ `for` æ–‡ã‚’ä½¿ã„ã€å„è¦ç´ ã«å‚ç…§ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- ãƒ«ãƒ¼ãƒ—å†…ã§è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹å ´åˆã€å‚ç…§ã‚’ä½¿ã„ã¾ã™
- `std::string` ã«å¯¾ã™ã‚‹ç¯„å›²ãƒ™ãƒ¼ã‚¹ for ãƒ«ãƒ¼ãƒ—ã¯ã€**æ–‡å­—åˆ—ã®è¦ç´ æ•°ãŒãƒ«ãƒ¼ãƒ—ä¸­ã«å¤‰æ›´ã•ã‚Œãªã„**ã¨ã„ã†å‰æã§å‹•ä½œã™ã‚‹ãŸã‚ã€çµ¶å¯¾ã«ãƒ«ãƒ¼ãƒ—å†…ã§ãã®æ–‡å­—åˆ—ã®è¦ç´ æ•°ã‚’å¢—æ¸›ã•ã›ã‚‹æ“ä½œã‚’ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ï¼ˆ9.3 å‚ç…§ï¼‰ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";

	// è¦ç´ ã®å€‹æ•°ã ã‘ç¹°ã‚Šè¿”ã™ãƒ«ãƒ¼ãƒ—ã€ch ã¯é †ã«å„è¦ç´ ã¸ã®å‚ç…§
	for (auto& ch : s)
	{
		ch += 1;
	}

	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
bqqmf
```

## 9.3 ç¯„å›²ãƒ™ãƒ¼ã‚¹ `for` æ–‡ã‚’ä½¿ã†ã¨ãã€è¦ç´ æ•°ã‚’å¤‰æ›´ã—ã¦ã¯ã„ã‘ãªã„
- `std::string` ã«å¯¾ã™ã‚‹ç¯„å›²ãƒ™ãƒ¼ã‚¹ for ãƒ«ãƒ¼ãƒ—ã¯ã€**æ–‡å­—åˆ—ã®è¦ç´ æ•°ãŒãƒ«ãƒ¼ãƒ—ä¸­ã«å¤‰æ›´ã•ã‚Œãªã„**ã¨ã„ã†å‰æã§å‹•ä½œã™ã‚‹ãŸã‚ã€çµ¶å¯¾ã«ãƒ«ãƒ¼ãƒ—å†…ã§ãã®æ–‡å­—åˆ—ã®è¦ç´ æ•°ã‚’å¢—æ¸›ã•ã›ã‚‹æ“ä½œã‚’ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚

```cpp:èª¤ã‚Šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
#include <iostream>
#include <string>

int main()
{
	std::string s = "straightforward";

	for (const auto& ch : s)
	{
		std::cout << ch << '\n';

		// NG: ç¯„å›²ãƒ™ãƒ¼ã‚¹ for æ–‡ã®ä¸­ã§ãƒ«ãƒ¼ãƒ—å¯¾è±¡ã®æ–‡å­—åˆ—ã®é•·ã•ã‚’å¤‰æ›´ã—ã¦ã¯ã„ã‘ãªã„
		s.push_back('-');
	}
}
```

## 9.4 åˆæœŸåŒ–å¼ã‚’ã¨ã‚‚ãªã†ã€ç¯„å›²ãƒ™ãƒ¼ã‚¹ã® `for` æ–‡ã‚’ä½¿ã†
- C++20 ã‹ã‚‰ã€ç¯„å›²ãƒ™ãƒ¼ã‚¹ã® `for` æ–‡ã«åˆæœŸåŒ–å¼ã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
- ä¾‹ãˆã°ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¶æ•°ç•ªç›®ã®æ–‡å­—ã‚’å‡ºåŠ›ã™ã‚‹éš›ã€å¤‰æ•° `i` ã‚’åˆæœŸåŒ–å¼ã§å®šç¾©ã™ã‚‹ã“ã¨ã§ã€`i` ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ãƒ«ãƒ¼ãƒ—å†…ã«é™å®šã§ãã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abcdefg";

	for (int i = 0; const auto& ch : s) // å¤‰æ•° i ã®ã‚¹ã‚³ãƒ¼ãƒ—ãŒãƒ«ãƒ¼ãƒ—å†…ã«é™å®šã•ã‚Œã‚‹
	{
		if ((i % 2) == 0)
		{
			std::cout << ch;
		}

		++i;
	}

	std::cout << '\n';
}
```
```txt:å‡ºåŠ›
aceg
```

- C++17 ã¾ã§ã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abcdefg";

	int i = 0; // å¤‰æ•° i ã®ã‚¹ã‚³ãƒ¼ãƒ—ãŒåºƒããªã£ã¦ã—ã¾ã†

	for (const auto& ch : s)
	{
		if ((i % 2) == 0)
		{
			std::cout << ch;
		}

		++i;
	}

	std::cout << '\n';
}
```
```txt:å‡ºåŠ›
aceg
```


## 9.5 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- é€šå¸¸ã® `for` æ–‡ã§ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- ã“ã®æ–¹æ³•ã¯ã€ç‰¹ã«ãƒ«ãƒ¼ãƒ—ãŒè¤‡é›‘ã«ãªã£ãŸæ™‚ã«ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ä½¿ã†å¤‰æ•°ã®å–ã‚Šé•ãˆã‚„ã€ãã‚Œã«ã¨ã‚‚ãªã†ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã—ã¾ã†ãƒŸã‚¹ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚å¿…è¦ãŒãªã„é™ã‚Šã¯ç¯„å›²ãƒ™ãƒ¼ã‚¹ã® `for` æ–‡ã‚„ã€10. ã§èª¬æ˜ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";

	for (std::size_t i = 0; i < s.size(); ++i)
	{
		// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
		std::cout << s[i] << '\n';
	}
}
```
```txt:å‡ºåŠ›
a
p
p
l
e
```


## 9.6 ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `std::string` ã¯ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- ã“ã®æ–¹æ³•ã¯ã€ç‰¹ã«ãƒ«ãƒ¼ãƒ—ãŒè¤‡é›‘ã«ãªã£ãŸæ™‚ã«ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã«ä½¿ã†å¤‰æ•°ã®å–ã‚Šé•ãˆã‚„ã€ãã‚Œã«ã¨ã‚‚ãªã†ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã—ã¾ã†ãƒŸã‚¹ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚å¿…è¦ãŒãªã„é™ã‚Šã¯ç¯„å›²ãƒ™ãƒ¼ã‚¹ã® `for` æ–‡ã‚„ã€10. ã§èª¬æ˜ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";

	for (auto it = s.begin(); it != s.end(); ++it)
	{
		// ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
		std::cout << *it << '\n';
	}
}
```
```txt:å‡ºåŠ›
a
p
p
l
e
```


## 9.7 é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
- `std::string` ã¯ã€é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- ã“ã®æ–¹æ³•ã¯ã€ç‰¹ã«ãƒ«ãƒ¼ãƒ—ãŒè¤‡é›‘ã«ãªã£ãŸæ™‚ã«ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã«ä½¿ã†å¤‰æ•°ã®å–ã‚Šé•ãˆã‚„ã€ãã‚Œã«ã¨ã‚‚ãªã†ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã—ã¾ã†ãƒŸã‚¹ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚å¿…è¦ãŒãªã„é™ã‚Šã¯ 10. ã§èª¬æ˜ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";

	for (auto it = s.rbegin(); it != s.rend(); ++it)
	{
		// é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦å„è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
		std::cout << *it << '\n';
	}
}
```
```txt:å‡ºåŠ›
e
l
p
p
a
```


# 10. ãƒ“ãƒ¥ãƒ¼ã‚’ç”¨ã„ãŸã‚¢ã‚¯ã‚»ã‚¹
- C++20 ã‹ã‚‰ã€`std::string` ãªã©ãƒ¬ãƒ³ã‚¸å…¨èˆ¬ã«å¯¾ã™ã‚‹**ãƒ“ãƒ¥ãƒ¼**ã‚’ä½œæˆã—ã€è¤‡é›‘ãªè¨­å®šã«åŸºã¥ããƒ¬ãƒ³ã‚¸å†…ã®ä¸€é€£ã®è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç°¡æ½”ã«è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
	- ã“ã“ã§ã®ãƒ“ãƒ¥ãƒ¼ã¯ã€æ–‡å­—åˆ—ãƒ“ãƒ¥ãƒ¼ï¼ˆ`std::string_view`ï¼‰ã¨ã¯ç•°ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
- ãƒ“ãƒ¥ãƒ¼ã¯ã€æ–°ã—ã„ `std::string` ã‚’ä½œæˆã—ãŸã‚Šã€æ—¢å­˜ã® `std::string` ã‚’å¤‰æ›´ã—ãŸã‚Šã™ã‚‹ã®ã§ã¯ãªãã€æ—¢å­˜ã® `std::string` ã«å¯¾ã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚ã‚‹ãŸã‚ã€é€šå¸¸ã€ãã®æ“ä½œã«æœŸå¾…ã•ã‚Œã‚‹æœ€å°ã®ã‚³ã‚¹ãƒˆã§å‹•ä½œã—ã¾ã™ã€‚
	- ä¾‹ãˆã° 10.1 ã®é€†é †ãƒ“ãƒ¥ãƒ¼ã¯ã€æ–‡å­—åˆ—ã®è¦ç´ ã‚’é€†é †ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã™ã‚‹ã ã‘ã§ã€æ–‡å­—åˆ—ã®è¦ç´ ã‚’å®Ÿéš›ã«é€†é †ã«ä¸¦ã¹æ›¿ãˆã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
- ãƒ“ãƒ¥ãƒ¼ã«å¯¾ã—ã¦ã¯ã€ç¯„å›²ãƒ™ãƒ¼ã‚¹ã® `for` æ–‡ãŒä½¿ãˆã‚‹ãŸã‚ã€ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã®ãƒŸã‚¹ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

## 10.1 é€†é †ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ [ğŸŸ¢C++20]
- `std::views::reverse` ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã«å¯¾ã—ã¦é€†é †ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚
- æ–‡å­—åˆ—ã®è¦ç´ ã‚’ `std::reverse()` / `std::ranges::reverse()` ã®ã‚ˆã†ã«å®Ÿéš›ã«é€†é †ã«ä¸¦ã¹æ›¿ãˆã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚ã€åŠ¹ç‡çš„ã§ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/v1.png =400x)

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s = "atcoder";

	// é€†é †ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼
	for (const auto& ch : s | std::views::reverse)
	{
		std::cout << ch << '\n';
	}
}
```
```txt:å‡ºåŠ›
r
e
d
o
c
t
a
```


## 10.2 æœ€åˆã® N å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ [ğŸŸ¢C++20]
- `std::views::take(N)` ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã®æœ€åˆã® N å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚
- è¦ç´ æ•°ãŒ N æœªæº€ã®å ´åˆã¯ã€ã™ã¹ã¦ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/v2.png =400x)

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s = "atcoder";

	// æœ€åˆã® 3 å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼
	for (auto& ch : s | std::views::take(3))
	{
		ch -= 32;
	}

	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
ATCoder
```


## 10.3 æœ€åˆã® N å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ [ğŸŸ¢C++20]
- `std::views::drop(N)` ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã®æœ€åˆã® N å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚
- è¦ç´ æ•°ãŒ N æœªæº€ã®å ´åˆã¯ã€ç©ºã®ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

![](https://raw.githubusercontent.com/Reputeless/lecture-files/main/zenn/competitive-programming/string/v3.png =400x)

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s = "atcoder";

	// æœ€åˆã® 3 å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼
	for (auto& ch : s | std::views::drop(3))
	{
		ch -= 32;
	}

	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
atcODER
```


## 10.4 æœ€åˆã® N å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸã‚ã¨ã®æœ€åˆã® M å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ [ğŸŸ¢C++20]
- ãƒ“ãƒ¥ãƒ¼ã‚’ä½œã‚‹ãŸã‚ã®ã‚¢ãƒ€ãƒ—ã‚¿ã¯ã€ãƒ‘ã‚¤ãƒ— `|` ã§ã¤ãªã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- `std::views::drop(N) | std::views::take(M)` ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã®æœ€åˆã® N å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸã‚ã¨ã®æœ€åˆã® M å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s = "atcoder";

	// æœ€åˆã® 3 å€‹ã®è¦ç´ ã‚’é™¤ã„ãŸã‚ã¨ã®æœ€åˆã® 2 å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼
	for (auto& ch : s | std::views::drop(3) | std::views::take(2))
	{
		ch -= 32;
	}

	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
atcODer
```

- `std::views::counted(it, count)` ã‚’ä½¿ã£ã¦æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ `it` ã®æŒ‡ã™ä½ç½®ãŒç¯„å›²å¤–ã«ãªã‚‰ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s = "atcoder";

	// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ 3 ç•ªç›®ã‹ã‚‰ 2 å€‹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã™ã‚‹
	for (auto& ch : std::views::counted((s.begin() + 3), 2))
	{
		ch -= 32;
	}

	std::cout << s << '\n';
}
```
```txt:å‡ºåŠ›
atcODer
```


## 10.5 ãƒ“ãƒ¥ãƒ¼ã‚’ `std::string` ã«å¤‰æ›ã™ã‚‹ [ğŸŸ¢C++20]
- `std::string` ã«å¯¾ã™ã‚‹ãƒ“ãƒ¥ãƒ¼ã‹ã‚‰æ–°ã—ã„ `std::string` ã‚’æ§‹ç¯‰ã™ã‚‹ã«ã¯ã€ãƒ“ãƒ¥ãƒ¼ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒšã‚¢ã‚’ä½¿ã„ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s1 = "abcdefg";

	auto view = (s1 | std::views::take(3));
	std::string s2(view.begin(), view.end());

	std::cout << s2 << '\n';
}
```
```txt:å‡ºåŠ›
abc
```

- C++23 ã«ãªã‚‹ã¨ã€`std::ranges::to<std::string>()` ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ“ãƒ¥ãƒ¼ã‚’ `std::string` ã«å¤‰æ›ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- AtCoder ã® gcc 12.2 ã§ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

```cpp
#include <iostream>
#include <string>
#include <ranges>

int main()
{
	std::string s1 = "abcdefg";
	
	std::string s2 = s1 | std::views::take(3) | std::ranges::to<std::string>();

	std::cout << s2 << '\n';
}
```
```txt:å‡ºåŠ›
abc
```


# 11. `std::string` ã¸ã®è¿½åŠ 

## 11.1 å‰å¾Œã«åˆ¥ã®æ–‡å­—åˆ—ã‚’è¶³ã—ãŸã€æ–°ã—ã„ `std::string` ã‚’ä½œæˆã™ã‚‹
- `+` æ¼”ç®—å­ã‚’ä½¿ã†ã¨ã€å‰å¾Œã«åˆ¥ã®æ–‡å­—åˆ—ã‚’è¿½åŠ ã—ãŸæ–°ã—ã„ `std::string` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚
- å…ƒã®æ–‡å­—åˆ—ã¯å¤‰æ›´ã•ã‚Œã¾ã›ã‚“ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "school";

	std::string t = ("high" + s); // å‰ã«è¶³ã—ãŸæ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹
	std::cout << t << '\n';

	std::string u = (s + "bus"); // ã†ã—ã‚ã«è¶³ã—ãŸæ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹
	std::cout << u << '\n';

	std::cout << ("my" + s) << '\n'; // å‰ã«è¶³ã—ãŸæ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹
}
```
```txt:å‡ºåŠ›
highschool
schoolbus
myschool
```

## 11.2 æœ«å°¾ã« 1 æ–‡å­—è¿½åŠ ã™ã‚‹
- `.push_back(ch)` ã§ã€æ–‡å­—åˆ—ã®æœ«å°¾ã«æ–‡å­— `ch` ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- 1.1 ã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚‹ã‚ˆã†ã«ã€æ–‡å­—åˆ—ã®æœ«å°¾ã¸ã®è¦ç´ è¿½åŠ ã¯ã€ãã®æ™‚ç‚¹ã§ã® NULL çµ‚ç«¯æ–‡å­—ã‚’æ–°ã—ã„æ–‡å­—ã«ç½®ãæ›ãˆã€ãã®ç›´å¾Œã«æ–°ã—ã„ NULL çµ‚ç«¯æ–‡å­—ã‚’æ ¼ç´ã™ã‚‹ã ã‘ã®éå¸¸ã«è»½é‡ãªæ“ä½œã«ãªã‚Šã¾ã™ã€‚
- è¦ç´ ã®è¿½åŠ ã‚’é‡ã­ã€é…åˆ—ã®ã‚µã‚¤ã‚ºãŒä¸è¶³ã—ãŸå ´åˆã«ã¯ã€ã‚ˆã‚Šåºƒã„é…åˆ—ã®å†ç¢ºä¿ãŒè¡Œã‚ã‚Œã¾ã™ã€‚ãã®éš›ã«ã¯ä½™è£•ã‚’æŒã£ãŸã‚µã‚¤ã‚ºï¼ˆä¾‹ãˆã°ãã®æ™‚ç‚¹ã§ã®ã‚µã‚¤ã‚ºã® 2 å€ãªã©ï¼‰ã®é ˜åŸŸã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ã§ã€è¿½åŠ æ“ä½œã®ãŸã³ã«æ¯å›é…åˆ—ã‚’å†ç¢ºä¿ã™ã‚‹ã‚ˆã†ãªéåŠ¹ç‡ãªäº‹æ…‹ãŒé˜²ãŒã‚Œã¦ã„ã¾ã™ã€‚
- ãã®ãŸã‚ã€`.push_back()` ã«ã‚ˆã‚‹è¦ç´ è¿½åŠ ã¯ã€å„Ÿå´è¨ˆç®—é‡ï¼ˆãªã‚‰ã—è¨ˆç®—é‡ï¼‰ $O(1)$ ã§ã™ã€‚


```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "t";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.push_back('o'); // æœ«å°¾ã« `o` ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';	

	s.push_back('p'); // æœ«å°¾ã« `p` ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';	
}
```
```txt:å‡ºåŠ›
t
1
to
2
top
3
```

## 11.3 å…ˆé ­ã« 1 æ–‡å­—è¿½åŠ ã™ã‚‹
- `.insert(it, ch)` ã¯ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ `it` ãŒæŒ‡ã™ä½ç½®ã®å‰ã«è¦ç´  `ch` ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- å…ˆé ­ä½ç½®ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ `.begin()` ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€æ–‡å­—åˆ—ã®å…ˆé ­ã«æ–‡å­—ã‚’è¿½åŠ ã§ãã¾ã™ã€‚
- 1.1 ã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚‹ã‚ˆã†ã«ã€æ–‡å­—åˆ—ã®æœ«å°¾ä»¥å¤–ã¸ã®è¦ç´ è¿½åŠ ã‚’è¡Œã†ã¨ã€ãã‚Œä»¥é™ã®è¦ç´ ã‚’ã™ã¹ã¦å³ã¸ãšã‚‰ã™å¿…è¦ãŒç”Ÿã˜ã¾ã™ã€‚ãã®ãŸã‚ã€æ–‡å­—åˆ—ã®å…ˆé ­ã¸ã®è¦ç´ è¿½åŠ ã®è¨ˆç®—é‡ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ã‚’ $N$ ã¨ã—ãŸã¨ãã€$O(N)$ ã¨ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ `std::vector` ã§ã‚‚åŒæ§˜ã§ã™ã€‚
	- å…ˆé ­ã¸ã®è¦ç´ è¿½åŠ ã‚’ $O(1)$ ã§è¡Œã†ã“ã¨ãŒã§ãã‚‹`std::deque` ã¨æ¯”ã¹ã‚‹ã¨ã€`std::string` ã‚„ `std::vector` ã§ã®å…ˆé ­ã¸ã®è¦ç´ è¿½åŠ ã¯é‡ã„æ“ä½œã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã„ã¦ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "p";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.insert(s.begin(), 'o'); // å…ˆé ­ã« `o` ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';	

	s.insert(s.begin(), 't'); // å…ˆé ­ã« `t` ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';	
}
```
```txt:å‡ºåŠ›
p
1
op
2
top
3
```

## 11.4 æœ«å°¾ã«æ–‡å­—åˆ—ã‚’è¿½åŠ ã™ã‚‹
- `+= other;` ã§ã€æ–‡å­—åˆ—ã®æœ«å°¾ã«æ–‡å­—åˆ— `other` ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "t";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s += "ea"; // æœ«å°¾ã« "ea" ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n'; 

	std::string t = "cher";
	s += t; // æœ«å°¾ã« "cher" ã‚’è¿½åŠ ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n'; 
}
```
```txt:å‡ºåŠ›
t
1
tea
3
teacher
7
```


# 12. è¦ç´ ã®å‰Šé™¤

## 12.1 æœ«å°¾ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
- `.pop_back()` ã¯æœ«å°¾ã®è¦ç´ ã‚’ 1 ã¤å‰Šé™¤ã—ã¾ã™ã€‚
- è¨ˆç®—é‡ã¯ $O(1)$ ã§ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã§ä½¿ã†ã¨ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã«ãªã‚‹ãŸã‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.pop_back(); // æœ«å°¾ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.pop_back(); // æœ«å°¾ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
apple
5
appl
4
app
3
```

## 12.2 å…ˆé ­ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
- `.erase(it)` ã¯ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ `it` ãŒæŒ‡ã™ä½ç½®ã®è¦ç´ ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
- å…ˆé ­ä½ç½®ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ `.begin()` ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§å…ˆé ­ã®æ–‡å­—ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚
- 1.1 ã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚‹ã‚ˆã†ã«ã€æ–‡å­—åˆ—ã®æœ«å°¾ä»¥å¤–ã¸ã®è¦ç´ ã®å‰Šé™¤ã‚’è¡Œã†ã¨ã€ãã‚Œä»¥é™ã®è¦ç´ ã‚’ã™ã¹ã¦å·¦ã¸ãšã‚‰ã™å¿…è¦ãŒç”Ÿã˜ã¾ã™ã€‚ãã®ãŸã‚ã€æ–‡å­—åˆ—ã®å…ˆé ­è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹è¨ˆç®—é‡ã¯ã€æ–‡å­—åˆ—ã®é•·ã•ã‚’ $N$ ã¨ã—ãŸã¨ãã€$O(N)$ ã¨ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ `std::vector` ã§ã‚‚åŒæ§˜ã§ã™ã€‚
	- å…ˆé ­è¦ç´ ã®å‰Šé™¤ã‚’ $O(1)$ ã§è¡Œã†ã“ã¨ãŒã§ãã‚‹ `std::deque` ã¨æ¯”ã¹ã‚‹ã¨ã€`std::string` ã‚„ `std::vector` ã§ã®å…ˆé ­è¦ç´ ã®å‰Šé™¤ã¯é‡ã„æ“ä½œã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã„ã¦ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "apple";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.erase(s.begin()); // å…ˆé ­ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.erase(s.begin()); // å…ˆé ­ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
apple
5
pple
4
ple
3
```


## 12.3 æœ«å°¾ã® N å€‹ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
- `.erase(itBegin, itEnd)` ã¯ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ [`itBegin`, `itEnd`) ã®ç¯„å›²ã®è¦ç´ ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
- `itBegin` ã« `.end() - N` ã‚’ã€`itEnd` ã« `.end()` ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€æœ«å°¾ã® N å€‹ã®æ–‡å­—ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚
- `.end() - N` ãŒç¯„å›²å¤–ã«ãªã‚‰ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
- ä¸€èˆ¬çš„ãªå®Ÿè£…ã§ã¯ã€1.1 ã®å›³ã§ã„ã†æ–°ã—ã„çµ‚ç«¯ä½ç½®ã« NULL çµ‚ç«¯æ–‡å­—ã‚’æ ¼ç´ã—ã€`m_size` ã‚’æ›´æ–°ã™ã‚‹ã ã‘ã®çœã‚³ã‚¹ãƒˆãªæ“ä½œã«ãªã£ã¦ã„ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "abcdefghijklmno";
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.erase((s.end() - 5), s.end()); // æœ«å°¾ã® 5 å€‹ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';

	s.erase((s.end() - 4), s.end()); // æœ«å°¾ã® 4 å€‹ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
}
```
```txt:å‡ºåŠ›
abcdefghijklmno
15
abcdefghij
10
abcdef
6
```


## 12.4 æ–‡å­—åˆ—ã‚’æ¶ˆå»ã™ã‚‹
- `.clear()` ã‚’ä½¿ã†ã¨ã€å…¨è¦ç´ ã‚’å‰Šé™¤ã—ã¦ç©ºã®æ–‡å­—åˆ—ã«ãªã‚Šã¾ã™ã€‚
	- ä¸€èˆ¬çš„ãª `std::string` ã®å®Ÿè£…ã¯ã€é…åˆ—ã®å…ˆé ­ã‚’ NULL çµ‚ç«¯æ–‡å­— `'\0'` ã«ã—ã¦ã€1.1 ã§èª¬æ˜ã—ãŸ `m_size` ã‚’ 0 ã«ã™ã‚‹ã“ã¨ã§ã€å¤–è¦‹ä¸Šæ¶ˆå»ã—ãŸã‚ˆã†ã«è¦‹ã›ã‹ã‘ã‚‹çœã‚³ã‚¹ãƒˆãªã‚‚ã®ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®å ´åˆã®è¨ˆç®—é‡ã¯ $O(1)$ ã§ã™ã€‚
- ä¸€èˆ¬çš„ãª `std::string` ã®å®Ÿè£…ã¯ã€`.clear()` ã‚’ã—ã¦ã‚‚ã€ç¢ºä¿ã—ãŸé…åˆ—é ˜åŸŸã¯ãã®ã¾ã¾ä¿æŒã•ã‚Œã¾ã™ï¼ˆ`.capacity()` ãŒå¤‰ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å†åˆ©ç”¨ã—ã¦æ–°ã—ã„è¦ç´ ã‚’è¿½åŠ ã™ã‚‹ã¨ãã®ãƒ¡ãƒ¢ãƒªç¢ºä¿ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘åˆ¶ã§ãã¾ã™ãŒã€ä½¿ç”¨ã—ãªã„å ´åˆã¯ãƒ¡ãƒ¢ãƒªã‚’ç„¡é§„ã«å æœ‰ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
- ç¢ºä¿ã—ãŸé…åˆ—ã®ã‚µã‚¤ã‚ºã‚’ã€ç¾åœ¨ã®è¦ç´ æ•°ã«åˆã‚ã›ã¦ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã™ã‚‹ã«ã¯ã€è¿½åŠ ã§ `.shrink_to_fit()` ã‚’ä½¿ã„ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s(100, 'a');

	std::cout << s << '\n';
	std::cout << s.size() << '\n';
	std::cout << s.capacity() << '\n';

	std::cout << "----\n";

	s.clear(); // è¦ç´ ã‚’å…¨æ¶ˆå»ã™ã‚‹
	std::cout << s << '\n';
	std::cout << s.size() << '\n';
	std::cout << s.capacity() << '\n';

	std::cout << "----\n";

	s.shrink_to_fit(); // ç¢ºä¿ã—ã¦ã„ã‚‹é…åˆ—ã®ã‚µã‚¤ã‚ºã‚’ç¾åœ¨ã®æ–‡å­—åˆ—ã®é•·ã•ã«åˆã‚ã›ã¦ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã™ã‚‹
	std::cout << s.size() << '\n';
	std::cout << s.capacity() << '\n';
}
```
```txt:å‡ºåŠ›ä¾‹
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
100
100
----

0
100
----
0
15
```


# 13. `std::string` ã®äº¤æ›

## 13.1 äºŒã¤ã® `std::string` ã‚’äº¤æ›ã™ã‚‹
- 2 ã¤ã® `std::string` å‹ã®å¤‰æ•° `a`, `b` ã®ä¸­èº«ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆã¯ `std::swap(a, b)` ã‚’ä½¿ã„ã¾ã™ã€‚
- å®Ÿéš›ã«é…åˆ—ã®è¦ç´ ã‚’ã²ã¨ã¤ãšã¤å…¥ã‚Œæ›¿ãˆã‚‹ã®ã§ã¯ãªãã€1.1 ã§è¦‹ãŸå†…éƒ¨ã®ãƒã‚¤ãƒ³ã‚¿ãªã©ã€æ•°å€‹ã®å¤‰æ•°ã‚’äº¤æ›ã™ã‚‹ã ã‘ãªã®ã§ã€æ ¼ç´ã—ã¦ã„ã‚‹æ–‡å­—åˆ—ã®é•·ã•ã«ã‚ˆã‚‰ãšã€è¨ˆç®—é‡ã¯ $O(1)$ ã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1 = "abcdefghijklmnopqrstuvwxyz";
	std::string s2 = "111111111111111111111111111111";

	std::swap(s1, s2); // ä¸­èº«ã‚’äº¤æ›ã™ã‚‹

	std::cout << s1 << '\n';
	std::cout << s2 << '\n';
}
```
```txt:å‡ºåŠ›
111111111111111111111111111111
abcdefghijklmnopqrstuvwxyz
```

- C++20 ä»¥é™ã§ã¯ã€åŒã˜æ“ä½œã‚’ã‚ˆã‚Šæ±ç”¨çš„ã«å®Ÿç¾ã™ã‚‹ `std::ranges::swap(a, b)` ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s1 = "abcdefghijklmnopqrstuvwxyz";
	std::string s2 = "111111111111111111111111111111";

	std::ranges::swap(s1, s2); // ä¸­èº«ã‚’äº¤æ›ã™ã‚‹

	std::cout << s1 << '\n';
	std::cout << s2 << '\n';
}
```
```txt:å‡ºåŠ›
111111111111111111111111111111
abcdefghijklmnopqrstuvwxyz
```


# 14. éƒ¨åˆ†æ–‡å­—åˆ—

## 14.1 æ–°ã—ã„éƒ¨åˆ†æ–‡å­—åˆ—ã® `std::string` ã‚’ä½œæˆã™ã‚‹
- `.substr(pos, count)` ã¯ã€æ–‡å­—åˆ—ã® `pos` ç•ªç›®ã®è¦ç´ ã‹ã‚‰ `count` å€‹ã¾ã§ã®è¦ç´ ã‹ã‚‰ãªã‚‹éƒ¨åˆ†æ–‡å­—åˆ—ã‚’ã€æ–°ã—ã„ `std::string` ã¨ã—ã¦è¿”ã—ã¾ã™ã€‚
- `count` ã‚’çœç•¥ã—ãŸå ´åˆã¯ã€`pos` ç•ªç›®ã®è¦ç´ ã‹ã‚‰æœ«å°¾ã¾ã§ã®è¦ç´ ã‹ã‚‰ãªã‚‹éƒ¨åˆ†æ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚
- `pos` ãŒæ–‡å­—åˆ—ã®é•·ã•ä»¥ä¸Šã®å ´åˆã¯ã€ç©ºã®æ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << s.substr(0, 2) << '\n'; // "at"
	std::cout << s.substr(3, 3) << '\n'; // "ode"
	std::cout << s.substr(3) << '\n'; // "oder"
	std::cout << s.substr(7) << '\n'; // ""
}
```
```txt:å‡ºåŠ›
at
ode
oder

```


## 14.2 æ–°ã—ã„éƒ¨åˆ†æ–‡å­—åˆ—ã® `std::string` ã‚’ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ãƒšã‚¢ã‹ã‚‰ä½œæˆã™ã‚‹
- ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ãƒšã‚¢ã‚’ä½¿ã£ã¦ã€éƒ¨åˆ†æ–‡å­—åˆ—ã‹ã‚‰æ–°ã—ã„ `std::string` ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << std::string(s.begin(), (s.begin() + 2)) << '\n'; // "at"
	std::cout << std::string((s.begin() + 1), s.end()) << '\n'; // "tcoder"
	std::cout << std::string(s.begin(), (s.end() - 1)) << '\n'; // "atcode"
	std::cout << std::string((s.end() - 2), s.end()) << '\n'; // "er"
}
```
```txt:å‡ºåŠ›
at
tcoder
atcode
er
```


## 14.3 éƒ¨åˆ†æ–‡å­—åˆ—ã‚’æŒ‡ã™ `std::string_view` ã‚’ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ãƒšã‚¢ã‹ã‚‰ä½œæˆã™ã‚‹ [ğŸŸ¢C++20]
- 14.1, 14.2 ã®æ–¹æ³•ã§ã¯ã€æ–°ã—ã„ `std::string` ã‚’ä½œæˆã™ã‚‹ãŸã‚ã€ãã®åˆ†ã€æ–°ã—ã„ãƒ¡ãƒ¢ãƒªã®æ¶ˆè²»ã¨æ–‡å­—åˆ—ã®ã‚³ãƒ”ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚ã“ã®ã‚³ã‚¹ãƒˆã‚’å›é¿ã™ã‚‹ã«ã¯ã€ä»£ã‚ã‚Šã«æ—¢å­˜ã® `std::string` å†…ã®éƒ¨åˆ†æ–‡å­—åˆ—ã‚’æŒ‡ã™æ–‡å­—åˆ—ãƒ“ãƒ¥ãƒ¼ `std::string_view` ã‚’ä½œæˆã—ã¾ã™ã€‚
- `std::string_view` ã¯ `std::string` ã¨ç•°ãªã‚Šã€æ—¢å­˜ã®æ–‡å­—åˆ—ã®ä¸€éƒ¨ã®ç¯„å›²ã‚’æŒ‡ã™æƒ…å ±ï¼ˆç¯„å›²ã®å…ˆé ­ã®ãƒã‚¤ãƒ³ã‚¿ã¨ã€ãã“ã‹ã‚‰ã®é•·ã•ï¼‰ã ã‘ã‚’ä¿æŒã™ã‚‹ãŸã‚ã€éå¸¸ã«è»½é‡ã§ã™ã€‚
- ãŸã ã—ã€æŒ‡ã—ã¦ã„ãŸ `std::string` ãŒç ´æ£„ã•ã‚ŒãŸã‚Šã€ã‚µã‚¤ã‚ºå¤‰æ›´ã«ã‚ˆã£ã¦ãƒ¡ãƒ¢ãƒªãŒå†ç¢ºä¿ã•ã‚ŒãŸã‚Šã™ã‚‹ã¨ã€`std::string_view` ã¯ä¸æ­£ãªä½ç½®ã‚’æŒ‡ã™ã“ã¨ã«ãªã‚Šã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã¨æœªå®šç¾©å‹•ä½œã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€`std::string_view` ã‚’å¤‰æ•°ã«ä¿å­˜ã—ã¦é•·ã„é–“ä¿æŒã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << std::string_view{ s.begin(), (s.begin() + 2) } << '\n'; // "at"
	std::cout << std::string_view{ (s.begin() + 1), s.end() } << '\n'; // "tcoder"
	std::cout << std::string_view{ s.begin(), (s.end() - 1) } << '\n'; // "atcode"
	std::cout << std::string_view{ (s.end() - 2), s.end() } << '\n'; // "er"
}
```
```txt:å‡ºåŠ›
at
tcoder
atcode
er
```


# 15. ä¾¿åˆ©ãªãƒ¡ãƒ³ãƒé–¢æ•°

## 15.1 ã‚ã‚‹æ–‡å­—åˆ—ã‹ã‚‰å§‹ã¾ã‚‹ã‹ã‚’èª¿ã¹ã‚‹ [ğŸŸ¢C++20]
- `.starts_with(str)` ã¯ã€è‡ªèº«ãŒæ–‡å­—åˆ— `str` ã‹ã‚‰å§‹ã¾ã‚‹ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚
- `.starts_with(ch)` ã¯ã€è‡ªèº«ãŒæ–‡å­— `ch` ã‹ã‚‰å§‹ã¾ã‚‹ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << std::boolalpha;
	std::cout << s.starts_with("at") << '\n'; // true
	std::cout << s.starts_with("coder") << '\n'; // false
	std::cout << s.starts_with('a') << '\n'; // true
	std::cout << s.starts_with('c') << '\n'; // false
}
```
```txt:å‡ºåŠ›
true
false
true
false
```


## 15.2 ã‚ã‚‹æ–‡å­—åˆ—ã§çµ‚ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹ [ğŸŸ¢C++20]
- `.ends_with(str)` ã¯ã€è‡ªèº«ãŒæ–‡å­—åˆ— `str` ã§çµ‚ã‚ã‚‹ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚
- `.ends_with(ch)` ã¯ã€è‡ªèº«ãŒæ–‡å­— `ch` ã§çµ‚ã‚ã‚‹ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << std::boolalpha;
	std::cout << s.ends_with("at") << '\n'; // false
	std::cout << s.ends_with("coder") << '\n'; // true
	std::cout << s.ends_with('r') << '\n'; // true
	std::cout << s.ends_with('a') << '\n'; // false
}
```
```txt:å‡ºåŠ›
false
true
true
false
```


## 15.3 ã‚ã‚‹æ–‡å­—åˆ—ã‚’å«ã‚€ã‹ã‚’èª¿ã¹ã‚‹ [ğŸŸ¢C++23]
- `.contains(str)` ã¯ã€è‡ªèº«ãŒæ–‡å­—åˆ— `str` ã‚’å«ã‚€ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚
- `.contains(ch)` ã¯ã€è‡ªèº«ãŒæ–‡å­— `ch` ã‚’å«ã‚€ã‹ã‚’ `bool` å€¤ã§è¿”ã—ã¾ã™ã€‚

```cpp
#include <iostream>
#include <string>

int main()
{
	std::string s = "atcoder";

	std::cout << std::boolalpha;
	std::cout << s.contains("at") << '\n'; // true
	std::cout << s.contains("coder") << '\n'; // true
	std::cout << s.contains("atcoder") << '\n'; // true
	std::cout << s.contains("atcoderr") << '\n'; // false
	std::cout << s.contains('a') << '\n'; // true
	std::cout << s.contains('z') << '\n'; // false
}
```
```txt:å‡ºåŠ›
true
true
true
false
true
false
```


# 16. `std::string` ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿
å‰Šé™¤ã‚„æŒ¿å…¥ã®ä½ç½®æŒ‡å®šã‚„ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é–¢æ•°ã§ä½¿ã†ãŸã‚ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ã€ä»¥ä¸‹ã®é–¢æ•°ã§å–å¾—ã§ãã¾ã™ã€‚ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸæ™‚ç‚¹ã‹ã‚‰æ–‡å­—åˆ—ã®ã‚µã‚¤ã‚ºãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ã€ãã‚Œä»¥å‰ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¯ç„¡åŠ¹ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å¤‰æ•°ã«ä¿å­˜ã—ã¦é•·ã„é–“ä¿æŒã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

## 16.1 å…ˆé ­ä½ç½®ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- `.begin()` ã¯æ–‡å­—åˆ—ã®å…ˆé ­ä½ç½®ã‚’æŒ‡ã™ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã®å ´åˆ `.begin() == .end()` ã§ã™ã€‚

## 16.2 çµ‚ç«¯ä½ç½®ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- `.end()` ã¯æ–‡å­—åˆ—ã®çµ‚ç«¯ä½ç½®ã‚’æŒ‡ã™ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã®å ´åˆ `.begin() == .end()` ã§ã™ã€‚

## 16.3 æœ«å°¾ã‚’æŒ‡ã™é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- `.rbegin()` ã¯æ–‡å­—åˆ—ã®æœ«å°¾ã‚’æŒ‡ã™é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã®å ´åˆ `.rbegin() == .rend()` ã§ã™ã€‚

## 16.4 å…ˆé ­ã®å‰ã‚’æŒ‡ã™é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- `.rend()` ã¯æ–‡å­—åˆ—ã®å…ˆé ­ã®å‰ã‚’æŒ‡ã™é€†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚
- ç©ºã®æ–‡å­—åˆ—ã®å ´åˆ `.rbegin() == .rend()` ã§ã™ã€‚


# å‚è€ƒè³‡æ–™
- [Inside STL: The string - The Old New Thing](https://devblogs.microsoft.com/oldnewthing/20230803-00/?p=108532)

