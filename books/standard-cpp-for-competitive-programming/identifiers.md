---
title: "識別子"
free: true
---

## 1. 識別子の基本
- 変数や関数、クラス、名前空間などに付ける名前のことを「識別子」と呼ぶ
- 次のコードに登場する識別子の一覧:
	- `Add`: 関数名
	- `a`: 変数名（`Add` 関数の引数）
	- `b`: 変数名（`Add` 関数の引数）
	- `Point`: クラス名
	- `x`: 変数名（`Point` クラスのメンバ変数）
	- `y`: 変数名（`Point` クラスのメンバ変数）
	- `main`: 関数名
	- `p`: 変数名（`main` 関数内の変数）
	- `std`: 名前空間
	- `cout`: 変数名（オブジェクト）

```cpp
#include <iostream>

int Add(int a, int b)
{
	return (a + b);
}

struct Point
{
	int x;
	int y;
};

int main()
{
	Point p{ 10, 20 };
	std::cout << Add(p.x, p.y) << '\n';
}
```

- これらの識別子のうち、`main`, `std`, `cout` が C++ 標準で名づけられている識別子。それ以外の識別子はプログラマが自由に変更できる
- `int` や `return`, `struct` などは、C++ 側ですでに使い道が決まっている「キーワード」であり、識別子ではない


## 2. 識別子のルール
- C++ の仕様として決められている、識別子の名前のルールを説明する

### 2.1 識別子として使用できる文字
- 識別子の先頭の文字には、以下の文字を使える
	- アルファベットの小文字 `a` から `z`
	- アルファベットの大文字 `A` から `Z`
	- アンダースコア `_`
	- （XID_Start カテゴリを持つ Unicode 文字）
- 識別子の 2 文字目以降には、以下の文字を使える
	- アルファベットの小文字 `a` から `z`
	- アルファベットの大文字 `A` から `Z`
	- 数字 `0` から `9`
	- アンダースコア `_`
	- （XID_Continue カテゴリを持つ Unicode 文字）

:::details Unicode 文字について
- 識別子として使える文字カテゴリを持つ Unicode 文字であれば、識別子に使うことができる
- したがって、C++ 仕様上は「あ」「合計」「🍎」のような、ひらがなや漢字、絵文字の識別子を作ることもできる
- ただし、一般的な慣習からは大きく外れ、（特に古いコンパイラで）対応していないコンパイラがあるため、慎重に扱う必要がある
- 現実のソフトウェア開発では、ツールの対応、可読性、文字コード、見た目が似ていて異なる文字の混入など、様々な問題があり、忌避されることが多い
```cpp
#include <iostream>

int main()
{
	int 🍎 = 10;
	int 🍌 = 20;
	int 合計 = (🍎 + 🍌);
	std::cout << 合計 << '\n';
}
```
:::

### 2.2 識別子として使えない名前（キーワード）
- `if` や `int` など、プログラミング言語の構文で特別な意味を持つ「キーワード」は、識別子として使うことはできない
	- [C++ のキーワード一覧](https://en.cppreference.com/w/cpp/keyword) 
	- キーワードと知らずに書いてしまいやすい名前の例: `new`, `long`, `short`, `do`, `register`, `case`, `this`, `default`, `and`
	- 名前の一部にキーワードを含むことは問題ない（`newPoint`, `longest`, `case2` など）
- キーワードは将来の C++ のバージョンで追加されることがあるため、新しいキーワードが追加された場合、それを識別子として使っていたプログラムは正しく動作しなくなることがある
	- 例えば `concept` というキーワードが C++20 で追加されたため、それを識別子として使っていたプログラムは C++20 以降でエラーになる

### 2.3 識別子として使うべきでない名前（予約済みの識別子）
- 次のような名前は、標準ライブラリなど内部での使用のために予約されているため、プログラマが識別子の命名に使うべきでない
	- 連続する `_` で始まる識別子（`__x` など）
	- 先頭に `_`, 2 文字目に大文字を使う識別子（`_X` など）
- 完全な禁止ではなく、実際にそのような識別子を作って使うことはできるが、内部用の識別子と名前が衝突してしまった場合、プログラムが正しく動作しなくなることがある

---

| 名前 | 識別子として使用できるか | 説明 |
| --- | --- | --- |
| `n` | ✅ |  |
| `N` | ✅ |  |
| `cat` | ✅ |  |
| `Cat` | ✅ |  |
| `Cat1` | ✅ |  |
| `Cat_1` | ✅ |  |
| `_` | ✅ |  |
| `_x` | ✅ |  |
| `x_` | ✅ |  |
| `my variable` | ❌ | 空白文字は使えない |
| `my-variable` | ❌ | `-` は使えない |
| `answer!` | ❌ | `!` は使えない |
| `24hours` | ❌ | 先頭に数字は使えない |
| `new` | ❌ | キーワードは使えない |
| `__x` | ❌ | 連続する `_` で始まってはいけない |
| `_X` | ❌ | 先頭に `_`, 2 文字目に大文字を使ってはいけない |

## 3. 名前の付け方のガイドライン

### 3.1 スタイルを統一する
- 大文字小文字をどう使い分けるか、アンダースコアを使うか、名前の長さはどうするかなど、識別子の名前の付け方には様々なスタイルがある
- なるべく一般的な慣習に従うことで、他のプログラマがコードを読みやすくなる
- 自分の書くプログラムで、一貫したスタイルを使うことは次のようなメリットがある
	- コードの見た目が統一される
	- コードの読みやすさが向上する
	- コードを書く際、命名に迷いがなくなる

### 3.2 本書が採用するスタイル
- 以下に、本書が採用する名前の付け方のガイドラインを示す
	- このスタイルを採用することで、他のプログラマにも読みやすいコードになり、名前に関連するバグも減らせる
	- 会社やプロジェクトによっては、これとは異なるスタイルを採用していることがある。その場合はそのスタイルに従うことを優先する

| 対象 | スタイル | 例 |
| --- | --- | --- |
| 変数名 | 小文字から始め、単語の区切りで大文字にする | `value`, `totalCost` |
| 関数名 | 大文字から始めてそれ以降は小文字、単語の区切りで大文字にする | `Add`, `IsPrime` |
| メンバ関数名 | 小文字から始め、単語の区切りで大文字にする | `add`, `setPoint` |
| クラス名 | 大文字から始めてそれ以降は小文字、単語の区切りで大文字にする | `Point`, `SegmentTree` |

- 英単語を省略しすぎるのは避ける（`cnt` ではなく `count`）
- 競技プログラミングの問題本文に登場する名前（`N` など）があれば、混乱を避けるためにその名前を使う
- 競技プログラミングの慣習で、特別な意味で使われる名前（`INF` など）があれば、その名前を使う
- 関数はなるべく「動詞」または「動詞 + 名詞」にする（`IsPrime`, `CalculateTotalPrice` など）
- クラスは 1 つまたは複数の名詞にする（`Edge`, `SegmentTree` など）
- 変数には、用途に応じて次のような名前を使う
	- `i`, `k`, `m`: 単純な `for` 文のインデックス変数
	- `x`, `y`: 二次元の座標や二次元配列のインデックス
	- `s`: 文字列（`string` の略）
	- `ch`: 文字（`char` の略）
	- `q`: キュー（`queue` の略）
	- `it`: イテレータ（`iterator` の略）
	- `elem`: 配列の要素
	- `sum`: 合計
	- `result`: 結果
- クラスの private メンバ変数には、先頭に `m_` を付ける（`m_parents`, `m_size` など）
- 配列は複数形にする（`distances`, `points` など）
- 「`i`」や「`1`（数字）」「`0`（数字）」との見間違いを防ぐため、「`j`」や「`l`（小文字の L）」「`O`（アルファベット）」「`o`（アルファベット）」という 1 文字だけの名前はなるべく使わない
